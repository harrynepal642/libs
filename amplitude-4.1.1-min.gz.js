!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.amplitude=t()}(this,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function n(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return function(){var t,n={},r=e.split(/ *; */);if(""==r[0])return n;for(var i=0;i<r.length;++i)n[o((t=r[i].split("="))[0])]=o(t[1]);return n}()}function r(e){try{return encodeURIComponent(e)}catch(t){N("error `encode(%o)` - %o",e,t)}}function o(e){try{return decodeURIComponent(e)}catch(t){N("error `decode(%o)` - %o",e,t)}}function i(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function s(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(ht(e),function(r){var o=encodeURIComponent(i(r))+n;return ft(e[r])?a(e[r],function(e){return o+encodeURIComponent(i(e))}).join(t):o+encodeURIComponent(i(e[r]))}).join(t):r?encodeURIComponent(i(r))+n+encodeURIComponent(i(e)):""}function a(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function c(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;0<s&&s<a&&(a=s);for(var c,u,p=0;p<a;++p){var l,d=e[p].replace(i,"%20"),f=d.indexOf(n),h=0<=f?(l=d.substr(0,f),d.substr(f+1)):(l=d,""),g=decodeURIComponent(l),v=decodeURIComponent(h);c=o,u=g,Object.prototype.hasOwnProperty.call(c,u)?ft(o[g])?o[g].push(v):o[g]=[o[g],v]:o[g]=v}return o}function u(e,n){n=n||{};var r,o,i=typeof e;if("string"==i&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*C;case"hours":case"hour":case"hrs":case"hr":case"h":return n*S;case"minutes":case"minute":case"mins":case"min":case"m":return n*E;case"seconds":case"second":case"secs":case"sec":case"s":return n*I;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"==i&&!1===isNaN(e))return n.long?t(o=e,C,"day")||t(o,S,"hour")||t(o,E,"minute")||t(o,I,"second")||o+" ms":C<=(r=e)?Math.round(r/C)+"d":S<=r?Math.round(r/S)+"h":E<=r?Math.round(r/E)+"m":I<=r?Math.round(r/I)+"s":r+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}function p(e,t,o){switch(arguments.length){case 3:case 2:return function(t,n){n=n||{};var o=r(e)+"="+r(t);null==t&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(o+="; path="+n.path),n.domain&&(o+="; domain="+n.domain),n.expires&&(o+="; expires="+n.expires.toUTCString()),n.secure&&(o+="; secure"),document.cookie=o}(t,o);case 1:return i=e,n()[i];default:return n()}var i}function l(e){switch(x.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":T(e)}function d(e){var t=l(e);if("object"!==t)return U.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>_.MAX_PROPERTY_KEYS)return U.error("Error: too many properties (more than 1000), ignoring"),{};var n,r,o,i={};for(var s in e)e.hasOwnProperty(s)&&("string"!==(r=l(n=s))&&(n=String(n),U.warn("WARNING: Non-string property key, received type "+r+', coercing to string "'+n+'"')),null!==(o=M(n,e[s]))&&(i[n]=o));return i}function f(e){var t="";return J.domain&&(t="."===J.domain.charAt(0)?J.domain.substring(1):J.domain),e+t}function h(e){try{for(var t=f(e)+"=",n=document.cookie.split(";"),r=null,o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){r=i.substring(t.length,i.length);break}}return r?JSON.parse(b.decode(r)):null}catch(e){return null}}function g(e,t){try{return $(f(e),b.encode(JSON.stringify(t)),J),!0}catch(e){return!1}}function v(e){try{return $(f(e),null,J),!0}catch(e){return!1}}var y,m="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_=(e(function(e,t){(function(){function n(e,t){function r(e){if(r[e]!==v)return r[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,p="function"==typeof u&&F;if(p){(s=function(){return 1}).toJSON=s;try{p="0"===u(0)&&"0"===u(new o)&&'""'==u(new i)&&u(U)===v&&u(v)===v&&u()===v&&"1"===u(s)&&"[1]"==u([s])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,U,null])&&u({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===u(null,s)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(e){p=!1}}n=p}if("json-parse"==e){var l=t.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){var d=5==(s=l(a)).a.length&&1===s.a[0];if(d){try{d=!l('"\t"')}catch(e){}if(d)try{d=1!==l("01")}catch(e){}if(d)try{d=1!==l("1.")}catch(e){}}}}catch(e){d=!1}n=d}}return r[e]=!!n}e=e||u.Object(),t=t||u.Object();var o=e.Number||u.Number,i=e.String||u.String,s=e.Object||u.Object,c=e.Date||u.Date,p=e.SyntaxError||u.SyntaxError,l=e.TypeError||u.TypeError,d=e.Math||u.Math,f=e.JSON||u.JSON;"object"==typeof f&&f&&(t.stringify=f.stringify,t.parse=f.parse);var h,g,v,y,m,_,b,w,I,E,S,C,O,N,A,T,x,j,k,P,R=s.prototype,U=R.toString,F=new c(-0xc782b5b800cec);try{F=-109252==F.getUTCFullYear()&&0===F.getUTCMonth()&&1===F.getUTCDate()&&10==F.getUTCHours()&&37==F.getUTCMinutes()&&6==F.getUTCSeconds()&&708==F.getUTCMilliseconds()}catch(e){}return r("json")||(y=r("bug-string-char-index"),F||(m=d.floor,_=[0,31,59,90,120,151,181,212,243,273,304,334],b=function(e,t){return _[t]+365*(e-1970)+m((e-1969+(t=+(1<t)))/4)-m((e-1901+t)/100)+m((e-1601+t)/400)}),(h=R.hasOwnProperty)||(h=function(e){var t,n={__proto__:null};return n.__proto__={toString:1},h=n.toString!=U?function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),g=function(e,t){var n,r,o,i=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)h.call(r,o)&&i++;return n=r=null,(g=i?2==i?function(e,t){var n,r={},o="[object Function]"==U.call(e);for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o="[object Function]"==U.call(e);for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,o,i="[object Function]"==U.call(e),s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(o=r.length;n=r[--o];s.call(e,n)&&t(n));}))(e,t)},r("json-stringify")||(w={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I=function(e,t){return("000000"+(t||0)).slice(-e)},E=function(e){for(var t='"',n=0,r=e.length,o=!y||10<r,i=o&&(y?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=w[s];break;default:if(s<32){t+="\\u00"+I(2,s.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},S=function(e,t,n,r,o,i,s){var a,c,u,p,d,f,y,_,w,C,O,N,A,T,x,j;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(c=U.call(a))||h.call(a,"toJSON"))"function"==typeof a.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||h.call(a,"toJSON"))&&(a=a.toJSON(e));else if(-1/0<a&&a<1/0){if(b){for(d=m(a/864e5),u=m(d/365.2425)+1970-1;b(u+1,0)<=d;u++);for(p=m((d-b(u,0))/30.42);b(u,p+1)<=d;p++);d=1+d-b(u,p),y=m((f=(a%864e5+864e5)%864e5)/36e5)%24,_=m(f/6e4)%60,w=m(f/1e3)%60,C=f%1e3}else u=a.getUTCFullYear(),p=a.getUTCMonth(),d=a.getUTCDate(),y=a.getUTCHours(),_=a.getUTCMinutes(),w=a.getUTCSeconds(),C=a.getUTCMilliseconds();a=(u<=0||1e4<=u?(u<0?"-":"+")+I(6,u<0?-u:u):I(4,u))+"-"+I(2,p+1)+"-"+I(2,d)+"T"+I(2,y)+":"+I(2,_)+":"+I(2,w)+"."+I(3,C)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(c=U.call(a)))return""+a;if("[object Number]"==c)return-1/0<a&&a<1/0?""+a:"null";if("[object String]"==c)return E(""+a);if("object"==typeof a){for(T=s.length;T--;)if(s[T]===a)throw l();if(s.push(a),O=[],x=i,i+=o,"[object Array]"==c){for(A=0,T=a.length;A<T;A++)N=S(A,a,n,r,o,i,s),O.push(N===v?"null":N);j=O.length?o?"[\n"+i+O.join(",\n"+i)+"\n"+x+"]":"["+O.join(",")+"]":"[]"}else g(r||a,function(e){var t=S(e,a,n,r,o,i,s);t!==v&&O.push(E(e)+":"+(o?" ":"")+t)}),j=O.length?o?"{\n"+i+O.join(",\n"+i)+"\n"+x+"}":"{"+O.join(",")+"}":"{}";return s.pop(),j}},t.stringify=function(e,t,n){var r,o,i,s;if(a[typeof t]&&t)if("[object Function]"==(s=U.call(t)))o=t;else if("[object Array]"==s){i={};for(var c,u=0,p=t.length;u<p;c=t[u++],"[object String]"!=(s=U.call(c))&&"[object Number]"!=s||(i[c]=1));}if(n)if("[object Number]"==(s=U.call(n))){if(0<(n-=n%1))for(r="",10<n&&(n=10);r.length<n;r+=" ");}else"[object String]"==s&&(r=n.length<=10?n:n.slice(0,10));return S("",((c={})[""]=e,c),o,i,r,"",[])}),r("json-parse")||(N=i.fromCharCode,A={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},T=function(){throw C=O=null,p()},x=function(){for(var e,t,n,r,o,i=O,s=i.length;C<s;)switch(o=i.charCodeAt(C)){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?i.charAt(C):i[C],C++,e;case 34:for(e="@",C++;C<s;)if((o=i.charCodeAt(C))<32)T();else if(92==o)switch(o=i.charCodeAt(++C)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=A[o],C++;break;case 117:for(t=++C,n=C+4;C<n;C++)48<=(o=i.charCodeAt(C))&&o<=57||97<=o&&o<=102||65<=o&&o<=70||T();e+=N("0x"+i.slice(t,C));break;default:T()}else{if(34==o)break;for(o=i.charCodeAt(C),t=C;32<=o&&92!=o&&34!=o;)o=i.charCodeAt(++C);e+=i.slice(t,C)}if(34==i.charCodeAt(C))return C++,e;T();default:if(t=C,45==o&&(r=!0,o=i.charCodeAt(++C)),48<=o&&o<=57){for(48==o&&48<=(o=i.charCodeAt(C+1))&&o<=57&&T(),r=!1;C<s&&48<=(o=i.charCodeAt(C))&&o<=57;C++);if(46==i.charCodeAt(C)){for(n=++C;n<s&&48<=(o=i.charCodeAt(n))&&o<=57;n++);n==C&&T(),C=n}if(101==(o=i.charCodeAt(C))||69==o){for(43!=(o=i.charCodeAt(++C))&&45!=o||C++,n=C;n<s&&48<=(o=i.charCodeAt(n))&&o<=57;n++);n==C&&T(),C=n}return+i.slice(t,C)}if(r&&T(),"true"==i.slice(C,C+4))return C+=4,!0;if("false"==i.slice(C,C+5))return C+=5,!1;if("null"==i.slice(C,C+4))return C+=4,null;T()}return"$"},j=function(e){var t,n;if("$"==e&&T(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=x());n=n||!0)!n||","==e&&"]"!=(e=x())||T(),","==e&&T(),t.push(j(e));return t}if("{"==e){for(t={};"}"!=(e=x());n=n||!0)!n||","==e&&"}"!=(e=x())||T(),","!=e&&"string"==typeof e&&"@"==(y?e.charAt(0):e[0])&&":"==x()||T(),t[e.slice(1)]=j(x());return t}T()}return e},k=function(e,t,n){var r=P(e,t,n);r===v?delete e[t]:e[t]=r},P=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if("[object Array]"==U.call(o))for(r=o.length;r--;)k(o,r,n);else g(o,function(e){k(o,e,n)});return n.call(e,t,o)},t.parse=function(e,t){var n,r;return C=0,O=""+e,n=j(x()),"$"!=x()&&T(),C=O=null,t&&"[object Function]"==U.call(t)?P(((r={})[""]=n,r),"",t):n})),t.runInContext=n,t}var r,o,i,s,a={function:!0,object:!0},c=a.object&&t&&!t.nodeType&&t,u=a[typeof window]&&window||this,p=c&&a.object&&e&&!e.nodeType&&"object"==typeof m&&m;!p||p.global!==p&&p.window!==p&&p.self!==p||(u=p),c?n(u,c):(r=u.JSON,o=u.JSON3,i=!1,s=n(u,u.JSON3={noConflict:function(){return i||(i=!0,u.JSON=r,u.JSON3=o,r=o=null),s}}),u.JSON={parse:s.parse,stringify:s.stringify})}).call(m)}),{DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",COOKIE_TEST:"amplitude_cookie_test",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id"}),b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}return b._encode(e)},_encode:function(e){var t,n,r,o,i,s,a,c="",u=0;for(e=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e);u<e.length;)o=(t=e.charCodeAt(u++))>>2,i=(3&t)<<4|(n=e.charCodeAt(u++))>>4,s=(15&n)<<2|(r=e.charCodeAt(u++))>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),c=c+b._keyStr.charAt(o)+b._keyStr.charAt(i)+b._keyStr.charAt(s)+b._keyStr.charAt(a);return c},decode:function(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(e){}return b._decode(e)},_decode:function(e){var t,n,r,o,i,s,a="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=b._keyStr.indexOf(e.charAt(c++))<<2|(o=b._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(i=b._keyStr.indexOf(e.charAt(c++)))>>2,r=(3&i)<<6|(s=b._keyStr.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!==i&&(a+=String.fromCharCode(n)),64!==s&&(a+=String.fromCharCode(r));return function(e){for(var t="",n=0,r=0,o=0,i=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):191<r&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return t}(a)}},w=e(function(e,t){t.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?function(){switch(t.protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}():t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},t.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},t.isRelative=function(e){return!t.isAbsolute(e)},t.isCrossDomain=function(e){e=t.parse(e);var n=t.parse(window.location.href);return e.hostname!==n.hostname||e.port!==n.port||e.protocol!==n.protocol}}),I=1e3,E=6e4,S=36e5,C=24*S,O=e(function(e,t){function n(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(o||r);e.diff=i,e.prev=o,e.curr=r,o=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var o,i=t.formatters[r];return"function"==typeof i&&(o=s[c],n=i.call(e,o),s.splice(c,1),c--),n}),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}var o;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),n.destroy=r,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(o=0;o<t.instances.length;o++){var i=t.instances[o];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;for(var n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=u,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),N=e(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=O).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n,r,o,i=this.useColors;e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),i&&(n="color: "+this.color,e.splice(1,0,n,"color: inherit"),e[o=r=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n))},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())})("cookie"),A=e(function(e,t){function n(e){for(var n=t.cookie,r=t.levels(e),o=0;o<r.length;++o){var i=r[o],s={domain:"."+i};if(n("__tld__",1,s),n("__tld__"))return n("__tld__",null,s),i}return""}var r=w.parse;n.levels=function(e){var t=r(e).hostname.split("."),n=t[t.length-1],o=[];if(4===t.length&&n===parseInt(n,10))return o;if(t.length<=1)return o;for(var i=t.length-2;0<=i;--i)o.push(t.slice(i).join("."));return o},n.cookie=p,t=e.exports=n}),T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=Object.prototype.toString,j="WARN",k=1,P=2,R=3,U={error:function(e){k<=j&&F(e)},warn:function(e){P<=j&&F(e)},info:function(e){R<=j&&F(e)}},F=function(e){try{console.log("[Amplitude] "+e)}catch(e){}},D=["null","nan","undefined","function","arguments","regexp","element"],M=function e(t,n){var r=l(n);if(-1!==D.indexOf(r))U.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("error"===r)n=String(n),U.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var o=[],i=0;i<n.length;i++){var s=n[i],a=l(s);"array"!==a&&"object"!==a?o.push(e(t,s)):U.warn("WARNING: Cannot have "+a+" nested in an array property value, skipping")}n=o}else"object"===r&&(n=d(n));return n},q=U,V=function(e){return!e||0===e.length},L=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},B=function e(t){if("array"===l(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if("object"===l(t))for(var r in t)t.hasOwnProperty(r)&&(t[r]=e(t[r]));else t="string"===l(o=t)&&o.length>_.MAX_STRING_LENGTH?o.substring(0,_.MAX_STRING_LENGTH):o;var o;return t},G=function(e){var t=l(e);if("object"!==t)return U.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n,r,o,i={};for(var s in e)e.hasOwnProperty(s)&&("string"!==(r=l(n=s))&&(n=String(n),U.warn("WARNING: Non-string groupType, received type "+r+', coercing to string "'+n+'"')),null!==(o=function(e){var t=l(e);if("string"===t)return e;if("date"===t||"number"===t||"boolean"===t)return e=String(e),U.warn("WARNING: Non-string groupName, received type "+t+', coercing to string "'+e+'"'),e;if("array"===t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=l(o);"array"!==i&&"object"!==i?"string"===i?n.push(o):"date"!==i&&"number"!==i&&"boolean"!==i||(o=String(o),U.warn("WARNING: Non-string groupName, received type "+i+', coercing to string "'+o+'"'),n.push(o)):U.warn("WARNING: Skipping nested "+i+" in array groupName")}return n}U.warn("WARNING: Non-string groupName, received type "+t+". Please use strings or array of strings for groupName")}(e[s]))&&(i[n]=o));return i},K=function(e,t,n){return l(e)===n||(U.error("Invalid "+t+" input type. Expected "+n+" but received "+l(e)),!1)},z=d,J={expirationDays:void 0,domain:void 0},$=function(e,t,n){var r,o=null!==t?n.expirationDays:-1;o&&((r=new Date).setTime(r.getTime()+24*o*60*60*1e3),o=r);var i=e+"="+t;o&&(i+="; expires="+o.toUTCString()),i+="; path=/",n.domain&&(i+="; domain="+n.domain),document.cookie=i},W={reset:function(){J={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return J;e=e||{},J.expirationDays=e.expirationDays;var t=V(e.domain)?"."+A(window.location.href):e.domain,n=Math.random();J.domain=t,g("amplitude_test",n);var r=h("amplitude_test");r&&r===n||(t=null),v("amplitude_test"),J.domain=t},get:h,set:g,remove:v};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}}())y=window.localStorage;else if(window.globalStorage)try{y=window.globalStorage[window.location.hostname]}catch(e){}else{var Y=document.createElement("div"),X="localStorage";Y.style.display="none",document.getElementsByTagName("head")[0].appendChild(Y),Y.addBehavior&&(Y.addBehavior("#default#userdata"),y={length:0,setItem:function(e,t){Y.load(X),Y.getAttribute(e)||this.length++,Y.setAttribute(e,t),Y.save(X)},getItem:function(e){return Y.load(X),Y.getAttribute(e)},removeItem:function(e){Y.load(X),Y.getAttribute(e)&&this.length--,Y.removeAttribute(e),Y.save(X)},clear:function(){Y.load(X);for(var e,t=0;e=Y.XMLDocument.documentElement.attributes[t++];)Y.removeAttribute(e.name);Y.save(X),this.length=0},key:function(e){return Y.load(X),Y.XMLDocument.documentElement.attributes[e]}},Y.load(X),y.length=Y.XMLDocument.documentElement.attributes.length)}function H(){this.storage=null}var Q=y=y||{length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}};function Z(){this.userPropertiesOperations={},this.properties=[]}function ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ae&&Ae in Object(e)?function(e){var t=Se.call(e,Oe),n=e[Oe];try{var r=!(e[Oe]=void 0)}catch(e){}var o=Ce.call(e);return r&&(t?e[Oe]=n:delete e[Oe]),o}(e):(t=e,Ne.call(t));var t}function te(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ne(e){if(te(e)){var t=ee(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}}function re(e,t,n){"__proto__"==t&&Me?Me(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function oe(e,t){return e===t||e!=e&&t!=t}function ie(e,t,n){var r=e[t];qe.call(e,t)&&oe(r,n)&&(void 0!==n||t in e)||re(e,t,n)}function se(e){return e}function ae(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}function ce(e){return null!=e&&ae(e.length)&&!ne(e)}function ue(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Ke.test(e))&&-1<e&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ze)}function le(e){return null!=e&&"object"==typeof e}function de(e){return le(e)&&"[object Arguments]"==ee(e)}function fe(){return!1}H.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return W.set(_.COOKIE_TEST,t),e=W.get(_.COOKIE_TEST)===t,W.remove(_.COOKIE_TEST),e}catch(e){}return!1},H.prototype.getStorage=function(){return null!==this.storage||(this._cookiesEnabled()?this.storage=W:this.storage={_options:{expirationDays:void 0,domain:void 0},reset:function(){this._options={expirationDays:void 0,domain:void 0}},options:function(e){return 0===arguments.length||(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname),this._options},get:function(e){try{return JSON.parse(Q.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function(e,t){try{return Q.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{Q.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}}),this.storage},Z.prototype.add=function(e,t){return"number"===l(t)||"string"===l(t)?this._addOperation("$add",e,t):q.error("Unsupported type for value: "+l(t)+", expecting number or string"),this},Z.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},Z.prototype.clearAll=function(){return 0<Object.keys(this.userPropertiesOperations).length?this.userPropertiesOperations.hasOwnProperty("$clearAll")||q.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"):this.userPropertiesOperations.$clearAll="-",this},Z.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},Z.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},Z.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},Z.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},Z.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?q.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):q.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var he,ge,ve,ye,me=e(function(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,r,o,i,s){return t((a=t(t(n,e),t(o,s)))<<i|a>>>32-i,r);var a}function r(e,t,r,o,i,s,a){return n(t&r|~t&o,e,t,i,s,a)}function o(e,t,r,o,i,s,a){return n(t&o|r&~o,e,t,i,s,a)}function i(e,t,r,o,i,s,a){return n(t^r^o,e,t,i,s,a)}function s(e,t,r,o,i,s,a){return n(r^(t|~o),e,t,i,s,a)}function a(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var a,c,u,p,l=1732584193,d=-271733879,f=-1732584194,h=271733878,g=0;g<e.length;g+=16)d=s(d=s(d=s(d=s(d=i(d=i(d=i(d=i(d=o(d=o(d=o(d=o(d=r(d=r(d=r(d=r(c=d,f=r(u=f,h=r(p=h,l=r(a=l,d,f,h,e[g],7,-680876936),d,f,e[g+1],12,-389564586),l,d,e[g+2],17,606105819),h,l,e[g+3],22,-1044525330),f=r(f,h=r(h,l=r(l,d,f,h,e[g+4],7,-176418897),d,f,e[g+5],12,1200080426),l,d,e[g+6],17,-1473231341),h,l,e[g+7],22,-45705983),f=r(f,h=r(h,l=r(l,d,f,h,e[g+8],7,1770035416),d,f,e[g+9],12,-1958414417),l,d,e[g+10],17,-42063),h,l,e[g+11],22,-1990404162),f=r(f,h=r(h,l=r(l,d,f,h,e[g+12],7,1804603682),d,f,e[g+13],12,-40341101),l,d,e[g+14],17,-1502002290),h,l,e[g+15],22,1236535329),f=o(f,h=o(h,l=o(l,d,f,h,e[g+1],5,-165796510),d,f,e[g+6],9,-1069501632),l,d,e[g+11],14,643717713),h,l,e[g],20,-373897302),f=o(f,h=o(h,l=o(l,d,f,h,e[g+5],5,-701558691),d,f,e[g+10],9,38016083),l,d,e[g+15],14,-660478335),h,l,e[g+4],20,-405537848),f=o(f,h=o(h,l=o(l,d,f,h,e[g+9],5,568446438),d,f,e[g+14],9,-1019803690),l,d,e[g+3],14,-187363961),h,l,e[g+8],20,1163531501),f=o(f,h=o(h,l=o(l,d,f,h,e[g+13],5,-1444681467),d,f,e[g+2],9,-51403784),l,d,e[g+7],14,1735328473),h,l,e[g+12],20,-1926607734),f=i(f,h=i(h,l=i(l,d,f,h,e[g+5],4,-378558),d,f,e[g+8],11,-2022574463),l,d,e[g+11],16,1839030562),h,l,e[g+14],23,-35309556),f=i(f,h=i(h,l=i(l,d,f,h,e[g+1],4,-1530992060),d,f,e[g+4],11,1272893353),l,d,e[g+7],16,-155497632),h,l,e[g+10],23,-1094730640),f=i(f,h=i(h,l=i(l,d,f,h,e[g+13],4,681279174),d,f,e[g],11,-358537222),l,d,e[g+3],16,-722521979),h,l,e[g+6],23,76029189),f=i(f,h=i(h,l=i(l,d,f,h,e[g+9],4,-640364487),d,f,e[g+12],11,-421815835),l,d,e[g+15],16,530742520),h,l,e[g+2],23,-995338651),f=s(f,h=s(h,l=s(l,d,f,h,e[g],6,-198630844),d,f,e[g+7],10,1126891415),l,d,e[g+14],15,-1416354905),h,l,e[g+5],21,-57434055),f=s(f,h=s(h,l=s(l,d,f,h,e[g+12],6,1700485571),d,f,e[g+3],10,-1894986606),l,d,e[g+10],15,-1051523),h,l,e[g+1],21,-2054922799),f=s(f,h=s(h,l=s(l,d,f,h,e[g+8],6,1873313359),d,f,e[g+15],10,-30611744),l,d,e[g+6],15,-1560198380),h,l,e[g+13],21,1309151649),f=s(f,h=s(h,l=s(l,d,f,h,e[g+4],6,-145523070),d,f,e[g+11],10,-1120210379),l,d,e[g+2],15,718787259),h,l,e[g+9],21,-343485551),l=t(l,a),d=t(d,c),f=t(f,u),h=t(h,p);return[l,d,f,h]}function c(e){for(var t="",n=32*e.length,r=0;r<n;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function u(e){var t=[];for(t[(e.length>>2)-1]=void 0,r=0;r<t.length;r+=1)t[r]=0;for(var n=8*e.length,r=0;r<n;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function p(e){for(var t,n="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function l(e){return unescape(encodeURIComponent(e))}function d(e){return c(a(u(t=l(e)),8*t.length));var t}function f(e,t){return function(e,t){var n,r,o=u(e),i=[],s=[];for(i[15]=s[15]=void 0,16<o.length&&(o=a(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],s[n]=1549556828^o[n];return r=a(i.concat(u(t)),512+8*t.length),c(a(s.concat(r),640))}(l(e),l(t))}function h(e,t,n){return t?n?f(t,e):p(f(t,e)):n?d(e):p(d(e))}var g;g=m,e.exports?e.exports=h:g.md5=h}),_e="object"==typeof m&&m&&m.Object===Object&&m,be="object"==typeof self&&self&&self.Object===Object&&self,we=_e||be||Function("return this")(),Ie=we.Symbol,Ee=Object.prototype,Se=Ee.hasOwnProperty,Ce=Ee.toString,Oe=Ie?Ie.toStringTag:void 0,Ne=Object.prototype.toString,Ae=Ie?Ie.toStringTag:void 0,Te=we["__core-js_shared__"],xe=(ye=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+ye:"",je=Function.prototype.toString,ke=/^\[object .+?Constructor\]$/,Pe=Function.prototype,Re=Object.prototype,Ue=Pe.toString,Fe=Re.hasOwnProperty,De=RegExp("^"+Ue.call(Fe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=function(){try{var e=(t=Object,"defineProperty",function(e){return!(!te(e)||xe&&xe in e)&&(ne(e)?De:ke).test(function(e){if(null!=e){try{return je.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r=null==(n=t)?void 0:n.defineProperty)?r:void 0);return e({},"",{}),e}catch(e){}var t,n,r}(),qe=Object.prototype.hasOwnProperty,Ve=Math.max,Le=Me?function(e,t){return Me(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:se,Be=Date.now,Ge=(he=Le,ve=ge=0,function(){var e=Be(),t=16-(e-ve);if(ve=e,0<t){if(800<=++ge)return arguments[0]}else ge=0;return he.apply(void 0,arguments)}),Ke=/^(?:0|[1-9]\d*)$/,ze=Object.prototype,Je=Object.prototype,$e=Je.hasOwnProperty,We=Je.propertyIsEnumerable,Ye=de(function(){return arguments}())?de:function(e){return le(e)&&$e.call(e,"callee")&&!We.call(e,"callee")},Xe=Array.isArray,He=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?we.Buffer:void 0,i=(o?o.isBuffer:void 0)||fe;e.exports=i}),Qe={};function Ze(e){return(ce(e)?function(e,t){var n=Xe(e),r=!n&&Ye(e),o=!n&&!r&&He(e),i=!n&&!r&&!o&&at(e),s=n||r||o||i,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)!t&&!ct.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ue(u,c))||a.push(u);return a}:function(e){if(!pe(e))return ut(e);var t=[];for(var n in Object(e))pt.call(e,n)&&"constructor"!=n&&t.push(n);return t})(e)}function et(e,t){this.url=e,this.data=t||{}}Qe["[object Float32Array]"]=Qe["[object Float64Array]"]=Qe["[object Int8Array]"]=Qe["[object Int16Array]"]=Qe["[object Int32Array]"]=Qe["[object Uint8Array]"]=Qe["[object Uint8ClampedArray]"]=Qe["[object Uint16Array]"]=Qe["[object Uint32Array]"]=!0,Qe["[object Arguments]"]=Qe["[object Array]"]=Qe["[object ArrayBuffer]"]=Qe["[object Boolean]"]=Qe["[object DataView]"]=Qe["[object Date]"]=Qe["[object Error]"]=Qe["[object Function]"]=Qe["[object Map]"]=Qe["[object Number]"]=Qe["[object Object]"]=Qe["[object RegExp]"]=Qe["[object Set]"]=Qe["[object String]"]=Qe["[object WeakMap]"]=!1;var tt,nt,rt,ot,it=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&_e.process,i=function(){try{return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),st=it&&it.isTypedArray,at=st?(ot=st,function(e){return ot(e)}):function(e){return le(e)&&ae(e.length)&&!!Qe[ee(e)]},ct=Object.prototype.hasOwnProperty,ut=(nt=Object.keys,rt=Object,function(e){return nt(rt(e))}),pt=Object.prototype.hasOwnProperty,lt=Object.prototype.hasOwnProperty,dt=(tt=function(e,t){if(pe(t)||ce(t))!function(e,t,n,r){var o=!n;n=n||{};for(var i=-1,s=t.length;++i<s;){var a=t[i],c=void 0;void 0===c&&(c=e[a]),(o?re:ie)(n,a,c)}}(t,Ze(t),e);else for(var n in t)lt.call(t,n)&&ie(e,n,t[n])},function(e,t){return Ge((n=e,o=se,r=Ve(void 0===(r=t)?n.length-1:r,0),function(){for(var e=arguments,t=-1,i=Ve(e.length-r,0),s=Array(i);++t<i;)s[t]=e[r+t];t=-1;for(var a=Array(r+1);++t<r;)a[t]=e[t];return a[r]=o(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(n,this,a)}),e+"");var n,r,o}(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0;o=3<tt.length&&"function"==typeof o?(r--,o):void 0;for(i&&function(e,t,n){if(te(n)){var r=typeof t;return("number"==r?ce(n)&&ue(t,n.length):"string"==r&&t in n)&&oe(n[t],e)}}(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var s=t[n];s&&tt(e,s)}return e})),ft=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ht=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},gt={encode:s,stringify:s,decode:c,parse:c};function vt(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null}function yt(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,yt)}function mt(e){this._instanceName=V(e)?_.DEFAULT_INSTANCE:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===_.DEFAULT_INSTANCE?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new _t(navigator.userAgent).getResult(),this.options=dt({},bt),this.cookieStorage=(new H).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null}et.prototype.send=function(e){var t,n;window.XDomainRequest?((t=new window.XDomainRequest).open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(gt.stringify(this.data))):((n=new XMLHttpRequest).open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(gt.stringify(this.data)))},vt.prototype.setProductId=function(e){return"string"!==l(e)?q.error("Unsupported type for productId: "+l(e)+", expecting string"):V(e)?q.error("Invalid empty productId"):this._productId=e,this},vt.prototype.setQuantity=function(e){return"number"!==l(e)?q.error("Unsupported type for quantity: "+l(e)+", expecting number"):this._quantity=parseInt(e),this},vt.prototype.setPrice=function(e){return"number"!==l(e)?q.error("Unsupported type for price: "+l(e)+", expecting number"):this._price=e,this},vt.prototype.setRevenueType=function(e){return"string"!==l(e)?q.error("Unsupported type for revenueType: "+l(e)+", expecting string"):this._revenueType=e,this},vt.prototype.setEventProperties=function(e){return"object"!==l(e)?q.error("Unsupported type for eventProperties: "+l(e)+", expecting object"):this._properties=z(e),this},vt.prototype._isValidRevenue=function(){return"number"===l(this._price)||(q.error("Invalid revenue, need to set price field"),!1)},vt.prototype._toJSONObject=function(){var e="object"===l(this._properties)?this._properties:{};return null!==this._productId&&(e[_.REVENUE_PRODUCT_ID]=this._productId),null!==this._quantity&&(e[_.REVENUE_QUANTITY]=this._quantity),null!==this._price&&(e[_.REVENUE_PRICE]=this._price),null!==this._revenueType&&(e[_.REVENUE_REVENUE_TYPE]=this._revenueType),e};var _t=e(function(e,t){!function(n){var r="model",o="name",i="type",s="vendor",a="version",c="mobile",u="tablet",p={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},l={rgx:function(){for(var e,t,n,r,o,i,s,a=0,c=arguments;a<c.length&&!i;){var u=c[a],p=c[a+1];if(void 0===e)for(r in e={},p)p.hasOwnProperty(r)&&("object"==typeof(o=p[r])?e[o[0]]=void 0:e[o]=void 0);for(t=n=0;t<u.length&&!i;)if(i=u[t++].exec(this.getUA()))for(r=0;r<p.length;r++)s=i[++n],"object"==typeof(o=p[r])&&0<o.length?2==o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,s):e[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=s?s.replace(o[1],o[2]):void 0:e[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(e[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):e[o]=s||void 0;a+=2}return e},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var r=0;r<t[n].length;r++)if(p.has(t[n][r],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},d={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},f={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,a],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],a],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[o,a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[o,"IE"],a],[/(edge)\/((\d+)?[\w\.]+)/i],[o,a],[/(yabrowser)\/([\w\.]+)/i],[[o,"Yandex"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],a],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[o,"Chrome Mobile"],a],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[o,a],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],a],[/(dolfin)\/([\w\.]+)/i],[[o,"Dolphin"],a],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[a,[o,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[a,[o,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[a,[o,"Facebook"]],[/fxios\/([\w\.-]+)/i],[a,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,o],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[o,[a,l.str,d.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[o,a],[/(blackberry)\\s?\/([\w\.]+)/i],[[o,"BlackBerry"],a],[/(navigator|netscape)\/([\w\.-]+)/i],[[o,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[o,a]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[r,s,[i,u]],[/applecoremedia\/[\w\.]+ \((ipad)/],[r,[s,"Apple"],[i,u]],[/(apple\s{0,1}tv)/i],[[r,"Apple TV"],[s,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[s,r,[i,u]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[r,[s,"Amazon"],[i,u]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[r,l.str,d.device.amazon.model],[s,"Amazon"],[i,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[r,s,[i,c]],[/\((ip[honed|\s\w*]+);/i],[r,[s,"Apple"],[i,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[s,r,[i,c]],[/\(bb10;\s(\w+)/i],[r,[s,"BlackBerry"],[i,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[r,[s,"Asus"],[i,u]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[s,"Sony"],[r,"Xperia Tablet"],[i,u]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[s,"Sony"],[r,"Xperia Phone"],[i,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[s,r,[i,"console"]],[/android.+;\s(shield)\sbuild/i],[r,[s,"Nvidia"],[i,"console"]],[/(playstation\s[34portablevi]+)/i],[r,[s,"Sony"],[i,"console"]],[/(sprint\s(\w+))/i],[[s,l.str,d.device.sprint.vendor],[r,l.str,d.device.sprint.model],[i,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,r,[i,u]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[r,/_/g," "],[i,c]],[/(nexus\s9)/i],[r,[s,"HTC"],[i,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[r,[s,"Microsoft"],[i,"console"]],[/(kin\.[onetw]{3})/i],[[r,/\./g," "],[s,"Microsoft"],[i,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[r,[s,"Motorola"],[i,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[r,[s,"Motorola"],[i,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[s,"Samsung"],r,[i,u]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[s,"Samsung"],r,[i,c]],[/(samsung);smarttv/i],[s,r,[i,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[r,[s,"Sharp"],[i,"smarttv"]],[/sie-(\w+)*/i],[r,[s,"Siemens"],[i,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[s,"Nokia"],r,[i,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[r,[s,"Acer"],[i,u]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[s,"LG"],r,[i,u]],[/(lg) netcast\.tv/i],[s,r,[i,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[r,[s,"LG"],[i,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[r,[s,"Lenovo"],[i,u]],[/linux;.+((jolla));/i],[s,r,[i,c]],[/((pebble))app\/[\d\.]+\s/i],[s,r,[i,"wearable"]],[/android.+;\s(glass)\s\d/i],[r,[s,"Google"],[i,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[r,/_/g," "],[s,"Xiaomi"],[i,c]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[i,p.lowerize],s,r]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[o,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[o,a],[/rv\:([\w\.]+).*(gecko)/i],[a,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[o,l.str,d.os.windows.name],[a,l.str,d.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[o,"Windows"],[a,l.str,d.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[o,a],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[o,"Symbian"],a],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],a],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[o,"Linux"],a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[o,"Chromium OS"],a],[/(sunos)\s?([\w\.]+\d)*/i],[[o,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[o,"Linux"],a],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[o,"iPhone"],[a,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[o,"iPad"],[a,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[o,"iOS"],[a,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[o,a]]},h=function(e,t){if(!(this instanceof h))return new h(e,t).getResult();var r=e||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),o=t?p.extend(f,t):f;return this.getBrowser=function(){var e=l.rgx.apply(this,o.browser);return e.major=p.major(e.version),e},this.getCPU=function(){return l.rgx.apply(this,o.cpu)},this.getDevice=function(){return l.rgx.apply(this,o.device)},this.getEngine=function(){return l.rgx.apply(this,o.engine)},this.getOS=function(){return l.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};h.VERSION="0.7.10",h.BROWSER={NAME:o,MAJOR:"major",VERSION:a},h.CPU={ARCHITECTURE:"architecture"},h.DEVICE={MODEL:r,VENDOR:s,TYPE:i,CONSOLE:"console",MOBILE:c,SMARTTV:"smarttv",TABLET:u,WEARABLE:"wearable",EMBEDDED:"embedded"},h.ENGINE={NAME:o,VERSION:a},h.OS={NAME:o,VERSION:a},e.exports&&(t=e.exports=h),t.UAParser=h;var g,v=n.jQuery||n.Zepto;void 0!==v&&(g=new h,v.ua=g.getResult(),v.ua.get=function(){return g.getUA()},v.ua.set=function(e){g.setUA(e);var t=g.getResult();for(var n in t)v.ua[n]=t[n]})}("object"==typeof window?window:m)}),bt={apiEndpoint:"api.amplitude.com",cookieExpiration:3650,cookieName:"amplitude_id",domain:"",includeReferrer:!1,includeUtm:!1,language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0,logLevel:"WARN",optOut:!1,platform:"Android",savedMaxCount:1e3,saveEvents:!0,sessionTimeout:18e5,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,batchEvents:!1,eventUploadThreshold:30,eventUploadPeriodMillis:3e4,forceHttps:!0,includeGclid:!1,saveParamsReferrerOncePerSession:!0,deviceIdFromUrlParam:!1};mt.prototype.Identify=Z,mt.prototype.Revenue=vt,mt.prototype.init=function(e,t,n,r){if("string"!==l(e)||V(e))q.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{if(this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,wt(this.options,n),this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===_.DEFAULT_INSTANCE&&It(this),Et(this),this.options.deviceId="object"===l(n)&&"string"===l(n.deviceId)&&!V(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||yt()+"R",this.options.userId="string"===l(t)&&!V(t)&&t||"number"===l(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var o=0;o<this._unsentEvents.length;o++){var i=this._unsentEvents[o].event_properties,s=this._unsentEvents[o].groups;this._unsentEvents[o].event_properties=z(i),this._unsentEvents[o].groups=G(s)}for(var a=0;a<this._unsentIdentifys.length;a++){var c=this._unsentIdentifys[a].user_properties,u=this._unsentIdentifys[a].groups;this._unsentIdentifys[a].user_properties=z(c),this._unsentIdentifys[a].groups=G(u)}}var p=(new Date).getTime();this._sessionId&&this._lastEventTime&&!(p-this._lastEventTime>this.options.sessionTimeout)||(this._newSession=!0,this._sessionId=p,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=p,Ct(this),this._sendEventsIfReady()}catch(e){q.error(e)}finally{"function"===l(r)&&r(this)}},mt.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var wt=function(e,t){if("object"===l(t))for(var n in t)t.hasOwnProperty(n)&&(r=n,o=void 0,bt.hasOwnProperty(r)&&(o=t[r],i=l(bt[r]),K(o,r+" option",i)&&("boolean"===i?e[r]=!!o:("string"===i&&!V(o)||"number"===i&&0<o)&&(e[r]=o))));var r,o,i};mt.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===l(t)&&t.apply(this,this._q[e].slice(1))}this._q=[]},mt.prototype._apiKeySet=function(e){return!V(this.options.apiKey)||(q.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},mt.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(Q,e),n=this._parseSavedUnsentEventsString(t,e),r=this._getFromStorageLegacy(Q,e),o=this._parseSavedUnsentEventsString(r,e).concat(n);return this._removeFromLegacyStorage(Q,e),this._setInStorage(Q,e,JSON.stringify(o)),o},mt.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},mt.prototype._parseSavedUnsentEventsString=function(e,t){if(V(e))return[];if("string"===l(e))try{var n=JSON.parse(e);if("array"===l(n))return n}catch(e){}return q.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},mt.prototype.isNewSession=function(){return this._newSession},mt.prototype.getSessionId=function(){return this._sessionId},mt.prototype.nextEventId=function(){return this._eventId++,this._eventId},mt.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},mt.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},mt.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},mt.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(!this.options.batchEvents||this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1))},mt.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},mt.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},mt.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var It=function(e){var t,n,r,o,i,s,a,c,u,p,d,f=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);"object"===l(f)||"object"===l(f=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix))&&f.deviceId&&f.sessionId&&f.lastEventTime||(t=function(e){var t=Q.getItem(e);return Q.removeItem(e),t},n="string"===l(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",r=t(_.DEVICE_ID+n),o=t(_.USER_ID+n),null!=(i=t(_.OPT_OUT+n))&&(i="true"===String(i)),s=parseInt(t(_.SESSION_ID)),a=parseInt(t(_.LAST_EVENT_TIME)),c=parseInt(t(_.LAST_EVENT_ID)),u=parseInt(t(_.LAST_IDENTIFY_ID)),p=parseInt(t(_.LAST_SEQUENCE_NUMBER)),d=function(e){return"object"===l(f)&&f[e]},e.options.deviceId=d("deviceId")||r,e.options.userId=d("userId")||o,e._sessionId=d("sessionId")||s||e._sessionId,e._lastEventTime=d("lastEventTime")||a||e._lastEventTime,e._eventId=d("eventId")||c||e._eventId,e._identifyId=d("identifyId")||u||e._identifyId,e._sequenceNumber=d("sequenceNumber")||p||e._sequenceNumber,e.options.optOut=i||!1,f&&void 0!==f.optOut&&null!==f.optOut&&(e.options.optOut="true"===String(f.optOut)),Ct(e))},Et=function(e){var t,n=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);"object"===l(n)?St(e,n):"object"===l(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix))&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),St(e,t))},St=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},Ct=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};mt.prototype._initUtmData=function(e,t){var n,r,o,i,s,a,c,u,p,l=(i=d("utm_source",r=e=e||this._getUrlParams(),"utmcsr",o=(n=t=t||this.cookieStorage.get("__utmz"))?"?"+n.split(".").slice(-1)[0].replace(/\|/g,"&"):""),s=d("utm_medium",r,"utmcmd",o),a=d("utm_campaign",r,"utmccn",o),c=d("utm_term",r,"utmctr",o),u=d("utm_content",r,"utmcct",o),p={},f("utm_source",i),f("utm_medium",s),f("utm_campaign",a),f("utm_term",c),f("utm_content",u),p);function d(e,t,n,r){return L(e,t)||L(n,r)}function f(e,t){V(t)||(p[e]=t)}Ot(this,l)};var Ot=function(e,t){if("object"===l(t)&&0!==Object.keys(t).length){var n=new Z;for(var r in t)t.hasOwnProperty(r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};function Nt(e,t){for(var n=0;n<t._q.length;n++){var r=e[t._q[n][0]];"function"===l(r)&&r.apply(e,t._q[n].slice(1))}return e}function At(e){return!isNaN(parseFloat(e))&&isFinite(e)}mt.prototype._getReferrer=function(){return document.referrer},mt.prototype._getUrlParams=function(){return location.search},mt.prototype._saveGclid=function(e){var t=L("gclid",e);V(t)||Ot(this,{gclid:t})},mt.prototype._getDeviceIdFromUrlParam=function(e){return L(_.AMP_DEVICE_ID_PARAM,e)},mt.prototype._getReferringDomain=function(e){if(V(e))return null;var t=e.split("/");return 3<=t.length?t[2]:null},mt.prototype._saveReferrer=function(e){var t;V(e)||(t={referrer:e,referring_domain:this._getReferringDomain(e)},Ot(this,t))},mt.prototype.saveEvents=function(){try{this._setInStorage(Q,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(Q,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},mt.prototype.setDomain=function(e){if(K(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,Et(this),Ct(this)}catch(e){q.error(e)}},mt.prototype.setUserId=function(e){try{this.options.userId=null!=e&&""+e||null,Ct(this)}catch(e){q.error(e)}},mt.prototype.setGroup=function(e,t){var n,r;this._apiKeySet("setGroup()")&&K(e,"groupType","string")&&!V(e)&&((n={})[e]=t,r=(new Z).set(e,t),this._logEvent(_.IDENTIFY_EVENT,null,null,r.userPropertiesOperations,n,null,null))},mt.prototype.setOptOut=function(e){if(K(e,"enable","boolean"))try{this.options.optOut=e,Ct(this)}catch(e){q.error(e)}},mt.prototype.setSessionId=function(e){if(K(e,"sessionId","number"))try{this._sessionId=e,Ct(this)}catch(e){q.error(e)}},mt.prototype.regenerateDeviceId=function(){this.setDeviceId(yt()+"R")},mt.prototype.setDeviceId=function(e){if(K(e,"deviceId","string"))try{V(e)||(this.options.deviceId=""+e,Ct(this))}catch(e){q.error(e)}},mt.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&K(e,"userProperties","object")){var t=B(z(e));if(0!==Object.keys(t).length){var n=new Z;for(var r in t)t.hasOwnProperty(r)&&n.set(r,t[r]);this.identify(n)}}},mt.prototype.clearUserProperties=function(){var e;this._apiKeySet("clearUserProperties()")&&((e=new Z).clearAll(),this.identify(e))},mt.prototype.identify=function(e,t){if(this._apiKeySet("identify()")){if("object"===l(e)&&e.hasOwnProperty("_q")&&(e=Nt(new Z,e)),e instanceof Z){if(0<Object.keys(e.userPropertiesOperations).length)return this._logEvent(_.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,t)}else q.error("Invalid identify input type. Expected Identify object but saw "+l(e));"function"===l(t)&&t(0,"No request sent")}else"function"===l(t)&&t(0,"No request sent")},mt.prototype.setVersionName=function(e){K(e,"versionName","string")&&(this.options.versionName=e)},mt.prototype._logEvent=function(e,t,n,r,o,i,s){if(Et(this),e&&!this.options.optOut)try{var a=e===_.IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId(),c=this.nextSequenceNumber(),u="number"===l(i)?i:(new Date).getTime();this._sessionId&&this._lastEventTime&&!(u-this._lastEventTime>this.options.sessionTimeout)||(this._sessionId=u),this._lastEventTime=u,Ct(this),r=r||{},n=n||{},t=t||{},o=o||{};var p={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:u,event_id:a,session_id:this._sessionId||-1,event_type:e,version_name:"7.1.2.940",platform:"Android",os_name:"android",os_version:"10",device_model:"RMX1851",device_brand:"Realme",device_manufacturer:"Realme",carrier:"T-Mobile US",country:"US",api_level:29,language:this.options.language,api_properties:n,event_properties:B(z(t)),user_properties:B(z(r)),uuid:yt(),library:{name:"amplitude-android",version:"2.25.1"},sequence_number:c,groups:B(G(o))};return p.event_properties.hasOwnProperty("Application")&&(p.event_properties.Application="Android: Napster US"),p.event_properties.hasOwnProperty("Brand")&&delete p.event_properties.Brand,p.event_properties.hasOwnProperty("Page URL")&&delete p.event_properties["Page URL"],p.event_properties.hasOwnProperty("App Version")&&delete p.event_properties["App Version"],p.event_properties.hasOwnProperty("Screen/Page Name")&&(p.event_properties.ScreenName=p.event_properties["Screen/Page Name"],delete p.event_properties["Screen/Page Name"]),e===_.IDENTIFY_EVENT?(this._unsentIdentifys.push(p),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(p),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(s)||"function"!==l(s)||s(0,"No request sent"),a}catch(e){q.error(e)}else"function"===l(s)&&s(0,"No request sent")},mt.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},mt.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},mt.prototype.logEventWithTimestamp=function(e,t,n,r){return this._apiKeySet("logEvent()")&&K(e,"eventType","string")&&!V(e)?this._logEvent(e,t,null,null,null,n,r):("function"===l(r)&&r(0,"No request sent"),-1)},mt.prototype.logEventWithGroups=function(e,t,n,r){return this._apiKeySet("logEventWithGroup()")&&K(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,r):("function"===l(r)&&r(0,"No request sent"),-1)},mt.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===l(e)&&e.hasOwnProperty("_q")&&(e=Nt(new vt,e)),e instanceof vt){if(e&&e._isValidRevenue())return this.logEvent(_.REVENUE_EVENT,e._toJSONObject())}else q.error("Invalid revenue input type. Expected Revenue object but saw "+l(e))},mt.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&At(e)&&(void 0===t||At(t))?this._logEvent(_.REVENUE_EVENT,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null):-1},mt.prototype.removeEvents=function(e,t){Tt(this,"_unsentEvents",e),Tt(this,"_unsentIdentifys",t)};var Tt=function(e,t,n){if(!(n<0)){for(var r=[],o=0;o<e[t].length;o++)e[t][o].event_id>n&&r.push(e[t][o]);e[t]=r}};function xt(){this.options=dt({},bt),this._q=[],this._instances={}}mt.prototype.sendEvents=function(e){var t,n,r,o,i,s,a,c,u;!this._apiKeySet("sendEvents()")||this._sending||this.options.optOut||0===this._unsentCount()?"function"===l(e)&&e(0,"No request sent"):(this._sending=!0,t=(this.options.forceHttps||"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",n=Math.min(this._unsentCount(),this.options.uploadBatchSize),r=this._mergeEventsAndIdentifys(n),o=r.maxEventId,i=r.maxIdentifyId,s=JSON.stringify(r.eventsToSend),a=(new Date).getTime(),c={client:this.options.apiKey,e:s,v:_.API_VERSION,upload_time:a,checksum:me(_.API_VERSION+this.options.apiKey+s+a)},u=this,new et(t,c).send(function(t,r){u._sending=!1;try{200===t&&"success"===r?(u.removeEvents(o,i),u.options.saveEvents&&u.saveEvents(),u._sendEventsIfReady(e)||"function"!==l(e)||e(t,r)):413===t?(1===u.options.uploadBatchSize&&u.removeEvents(o,i),u.options.uploadBatchSize=Math.ceil(n/2),u.sendEvents(e)):"function"===l(e)&&e(t,r)}catch(t){}}))},mt.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,o=0,i=-1;t.length<e;){var s,a=o>=this._unsentIdentifys.length,c=n>=this._unsentEvents.length;if(c&&a){q.error("Merging Events and Identifys, less events and identifys than expected");break}a||!c&&(!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[o].sequence_number)?r=(s=this._unsentEvents[n++]).event_id:i=(s=this._unsentIdentifys[o++]).event_id,t.push(s)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:i}},mt.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},mt.prototype.__VERSION__="4.1.1",xt.prototype.Identify=Z,xt.prototype.Revenue=vt,xt.prototype.getInstance=function(e){e=V(e)?_.DEFAULT_INSTANCE:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new mt(e),this._instances[e]=t),t},xt.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===l(r)&&r(e)}.bind(this))},xt.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===l(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)this._instances.hasOwnProperty(n)&&this._instances[n].runQueuedFunctions()},xt.prototype.isNewSession=function(){return this.getInstance().isNewSession()},xt.prototype.getSessionId=function(){return this.getInstance().getSessionId()},xt.prototype.nextEventId=function(){return this.getInstance().nextEventId()},xt.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},xt.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},xt.prototype.saveEvents=function(){this.getInstance().saveEvents()},xt.prototype.setDomain=function(e){this.getInstance().setDomain(e)},xt.prototype.setUserId=function(e){this.getInstance().setUserId(e)},xt.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},xt.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},xt.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},xt.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},xt.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},xt.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},xt.prototype.identify=function(e,t){this.getInstance().identify(e,t)},xt.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},xt.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},xt.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},xt.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},xt.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},xt.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},xt.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},xt.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},xt.prototype.__VERSION__="4.1.1";var jt=window.amplitude||{},kt=new xt;for(var Pt in kt._q=jt._q||[],jt._iq)jt._iq.hasOwnProperty(Pt)&&(kt.getInstance(Pt)._q=jt._iq[Pt]._q||[]);return kt});
