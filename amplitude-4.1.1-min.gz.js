!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.amplitude=t()}(this,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}function o(){var o;try{o=document.cookie}catch(o){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(o.stack||o),{}}return function(){var e,t={},n=o.split(/ *; */);if(""==n[0])return t;for(var r=0;r<n.length;++r)t[a((e=n[r].split("="))[0])]=a(e[1]);return t}()}function s(t){try{return encodeURIComponent(t)}catch(e){T("error `encode(%o)` - %o",t,e)}}function a(t){try{return decodeURIComponent(t)}catch(e){T("error `decode(%o)` - %o",t,e)}}function c(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function t(n,r,o,e){return r=r||"&",o=o||"=",null===n&&(n=void 0),"object"==typeof n?u(yt(n),function(e){var t=encodeURIComponent(c(e))+o;return vt(n[e])?u(n[e],function(e){return t+encodeURIComponent(c(e))}).join(r):t+encodeURIComponent(c(n[e]))}).join(r):e?encodeURIComponent(c(e))+o+encodeURIComponent(c(n)):""}function u(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}function n(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;0<s&&s<a&&(a=s);for(var c,u,p=0;p<a;++p){var l,d=e[p].replace(i,"%20"),f=d.indexOf(n),h=0<=f?(l=d.substr(0,f),d.substr(f+1)):(l=d,""),g=decodeURIComponent(l),v=decodeURIComponent(h);c=o,u=g,Object.prototype.hasOwnProperty.call(c,u)?vt(o[g])?o[g].push(v):o[g]=[o[g],v]:o[g]=v}return o}function r(e,t){t=t||{};var n,r,o=typeof e;if("string"==o&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*N;case"hours":case"hour":case"hrs":case"hr":case"h":return n*O;case"minutes":case"minute":case"mins":case"min":case"m":return n*C;case"seconds":case"second":case"secs":case"sec":case"s":return n*S;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"==o&&!1===isNaN(e))return t.long?i(r=e,N,"day")||i(r,O,"hour")||i(r,C,"minute")||i(r,S,"second")||r+" ms":N<=(n=e)?Math.round(n/N)+"d":O<=n?Math.round(n/O)+"h":C<=n?Math.round(n/C)+"m":S<=n?Math.round(n/S)+"s":n+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}function p(r,e,t){switch(arguments.length){case 3:case 2:return function(e,t){t=t||{};var n=s(r)+"="+s(e);null==e&&(t.maxage=-1),t.maxage&&(t.expires=new Date(+new Date+t.maxage)),t.path&&(n+="; path="+t.path),t.domain&&(n+="; domain="+t.domain),t.expires&&(n+="; expires="+t.expires.toUTCString()),t.secure&&(n+="; secure"),document.cookie=n}(e,t);case 1:return n=r,o()[n];default:return o()}var n}function f(e){switch(k.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?"buffer":void 0===(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))?"undefined":j(e)}function l(e){var t=f(e);if("object"!==t)return F.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>_.MAX_PROPERTY_KEYS)return F.error("Error: too many properties (more than 1000), ignoring"),{};var n,r,o,i={};for(var s in e){e.hasOwnProperty(s)&&("string"!==(r=f(n=s))&&(n=String(n),F.warn("WARNING: Non-string property key, received type "+r+', coercing to string "'+n+'"')),null!==(o=M(n,e[s]))&&(i[n]=o))}return i}function d(e){var t="";return J.domain&&(t="."===J.domain.charAt(0)?J.domain.substring(1):J.domain),e+t}function h(e){try{for(var t=d(e)+"=",n=document.cookie.split(";"),r=null,o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t)){r=i.substring(t.length,i.length);break}}return r?JSON.parse(I.decode(r)):null}catch(e){return null}}function g(e,t){try{return $(d(e),I.encode(JSON.stringify(t)),J),!0}catch(e){return!1}}function v(e){try{return $(d(e),null,J),!0}catch(e){return!1}}var y,m="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_=(e(function(s,a){(function(){function U(e,c){function u(e){if(u[e]!==O)return u[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=u("json-stringify")&&u("json-parse");else{var n,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,i="function"==typeof o&&R;if(i){(n=function(){return 1}).toJSON=n;try{i="0"===o(0)&&"0"===o(new p)&&'""'==o(new l)&&o(k)===O&&o(O)===O&&o()===O&&"1"===o(n)&&"[1]"==o([n])&&"[null]"==o([O])&&"null"==o(null)&&"[null,null,null]"==o([O,k,null])&&o({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===o(null,n)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new d(-1))}catch(e){i=!1}}t=i}if("json-parse"==e){var s=c.parse;if("function"==typeof s)try{if(0===s("0")&&!s(!1)){var a=5==(n=s(r)).a.length&&1===n.a[0];if(a){try{a=!s('"\t"')}catch(e){}if(a)try{a=1!==s("01")}catch(e){}if(a)try{a=1!==s("1.")}catch(e){}}}}catch(e){a=!1}t=a}}return u[e]=!!t}e=e||P.Object(),c=c||P.Object();var p=e.Number||P.Number,l=e.String||P.String,t=e.Object||P.Object,d=e.Date||P.Date,n=e.SyntaxError||P.SyntaxError,E=e.TypeError||P.TypeError,r=e.Math||P.Math,o=e.JSON||P.JSON;"object"==typeof o&&o&&(c.stringify=o.stringify,c.parse=o.parse);var S,C,O,a,N,i,A,f,T,x,j,h,g,v,y,m,s,_,b,w,I=t.prototype,k=I.toString,R=new d(-0xc782b5b800cec);try{R=-109252==R.getUTCFullYear()&&0===R.getUTCMonth()&&1===R.getUTCDate()&&10==R.getUTCHours()&&37==R.getUTCMinutes()&&6==R.getUTCSeconds()&&708==R.getUTCMilliseconds()}catch(e){}return u("json")||(a=u("bug-string-char-index"),R||(N=r.floor,i=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return i[t]+365*(e-1970)+N((e-1969+(t=+(1<t)))/4)-N((e-1901+t)/100)+N((e-1601+t)/400)}),(S=I.hasOwnProperty)||(S=function(e){var n,t={__proto__:null};return t.__proto__={toString:1},S=t.toString!=k?function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,S.call(this,e)}),C=function(e,t){var n,s,r,o=0;for(r in(n=function(){this.valueOf=0}).prototype.valueOf=0,s=new n)S.call(s,r)&&o++;return n=s=null,(C=o?2==o?function(e,t){var n,r={},o="[object Function]"==k.call(e);for(n in e)o&&"prototype"==n||S.call(r,n)||!(r[n]=1)||!S.call(e,n)||t(n)}:function(e,t){var n,r,o="[object Function]"==k.call(e);for(n in e)o&&"prototype"==n||!S.call(e,n)||(r="constructor"===n)||t(n);(r||S.call(e,n="constructor"))&&t(n)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,r,o="[object Function]"==k.call(e),i=!o&&"function"!=typeof e.constructor&&F[typeof e.hasOwnProperty]&&e.hasOwnProperty||S;for(n in e)o&&"prototype"==n||!i.call(e,n)||t(n);for(r=s.length;n=s[--r];i.call(e,n)&&t(n));}))(e,t)},u("json-stringify")||(f={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T=function(e,t){return("000000"+(t||0)).slice(-e)},x=function(e){for(var t='"',n=0,r=e.length,o=!a||10<r,i=o&&(a?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=f[s];break;default:if(s<32){t+="\\u00"+T(2,s.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},j=function(e,t,n,r,o,i,s){var a,c,u,p,l,d,f,h,g,v,y,m,_,b,w,I;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(c=k.call(a))||S.call(a,"toJSON"))"function"==typeof a.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||S.call(a,"toJSON"))&&(a=a.toJSON(e));else if(-1/0<a&&a<1/0){if(A){for(l=N(a/864e5),u=N(l/365.2425)+1970-1;A(u+1,0)<=l;u++);for(p=N((l-A(u,0))/30.42);A(u,p+1)<=l;p++);l=1+l-A(u,p),f=N((d=(a%864e5+864e5)%864e5)/36e5)%24,h=N(d/6e4)%60,g=N(d/1e3)%60,v=d%1e3}else u=a.getUTCFullYear(),p=a.getUTCMonth(),l=a.getUTCDate(),f=a.getUTCHours(),h=a.getUTCMinutes(),g=a.getUTCSeconds(),v=a.getUTCMilliseconds();a=(u<=0||1e4<=u?(u<0?"-":"+")+T(6,u<0?-u:u):T(4,u))+"-"+T(2,p+1)+"-"+T(2,l)+"T"+T(2,f)+":"+T(2,h)+":"+T(2,g)+"."+T(3,v)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(c=k.call(a)))return""+a;if("[object Number]"==c)return-1/0<a&&a<1/0?""+a:"null";if("[object String]"==c)return x(""+a);if("object"==typeof a){for(b=s.length;b--;)if(s[b]===a)throw E();if(s.push(a),y=[],w=i,i+=o,"[object Array]"==c){for(_=0,b=a.length;_<b;_++)m=j(_,a,n,r,o,i,s),y.push(m===O?"null":m);I=y.length?o?"[\n"+i+y.join(",\n"+i)+"\n"+w+"]":"["+y.join(",")+"]":"[]"}else C(r||a,function(e){var t=j(e,a,n,r,o,i,s);t!==O&&y.push(x(e)+":"+(o?" ":"")+t)}),I=y.length?o?"{\n"+i+y.join(",\n"+i)+"\n"+w+"}":"{"+y.join(",")+"}":"{}";return s.pop(),I}},c.stringify=function(e,t,n){var r,o,i,s;if(F[typeof t]&&t)if("[object Function]"==(s=k.call(t)))o=t;else if("[object Array]"==s){i={};for(var a,c=0,u=t.length;c<u;a=t[c++],"[object String]"!=(s=k.call(a))&&"[object Number]"!=s||(i[a]=1));}if(n)if("[object Number]"==(s=k.call(n))){if(0<(n-=n%1))for(r="",10<n&&(n=10);r.length<n;r+=" ");}else"[object String]"==s&&(r=n.length<=10?n:n.slice(0,10));return j("",((a={})[""]=e,a),o,i,r,"",[])}),u("json-parse")||(v=l.fromCharCode,y={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},m=function(){throw h=g=null,n()},s=function(){for(var e,t,n,r,o,i=g,s=i.length;h<s;)switch(o=i.charCodeAt(h)){case 9:case 10:case 13:case 32:h++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=a?i.charAt(h):i[h],h++,e;case 34:for(e="@",h++;h<s;)if((o=i.charCodeAt(h))<32)m();else if(92==o)switch(o=i.charCodeAt(++h)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=y[o],h++;break;case 117:for(t=++h,n=h+4;h<n;h++)48<=(o=i.charCodeAt(h))&&o<=57||97<=o&&o<=102||65<=o&&o<=70||m();e+=v("0x"+i.slice(t,h));break;default:m()}else{if(34==o)break;for(o=i.charCodeAt(h),t=h;32<=o&&92!=o&&34!=o;)o=i.charCodeAt(++h);e+=i.slice(t,h)}if(34==i.charCodeAt(h))return h++,e;m();default:if(t=h,45==o&&(r=!0,o=i.charCodeAt(++h)),48<=o&&o<=57){for(48==o&&48<=(o=i.charCodeAt(h+1))&&o<=57&&m(),r=!1;h<s&&48<=(o=i.charCodeAt(h))&&o<=57;h++);if(46==i.charCodeAt(h)){for(n=++h;n<s&&48<=(o=i.charCodeAt(n))&&o<=57;n++);n==h&&m(),h=n}if(101==(o=i.charCodeAt(h))||69==o){for(43!=(o=i.charCodeAt(++h))&&45!=o||h++,n=h;n<s&&48<=(o=i.charCodeAt(n))&&o<=57;n++);n==h&&m(),h=n}return+i.slice(t,h)}if(r&&m(),"true"==i.slice(h,h+4))return h+=4,!0;if("false"==i.slice(h,h+5))return h+=5,!1;if("null"==i.slice(h,h+4))return h+=4,null;m()}return"$"},_=function(e){var t,n;if("$"==e&&m(),"string"==typeof e){if("@"==(a?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=s());n=n||!0)!n||","==e&&"]"!=(e=s())||m(),","==e&&m(),t.push(_(e));return t}if("{"==e){for(t={};"}"!=(e=s());n=n||!0)!n||","==e&&"}"!=(e=s())||m(),","!=e&&"string"==typeof e&&"@"==(a?e.charAt(0):e[0])&&":"==s()||m(),t[e.slice(1)]=_(s());return t}m()}return e},b=function(e,t,n){var r=w(e,t,n);r===O?delete e[t]:e[t]=r},w=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if("[object Array]"==k.call(o))for(r=o.length;r--;)b(o,r,n);else C(o,function(e){b(o,e,n)});return n.call(e,t,o)},c.parse=function(e,t){var n,r;return h=0,g=""+e,n=_(s()),"$"!=s()&&m(),h=g=null,t&&"[object Function]"==k.call(t)?w(((r={})[""]=n,r),"",t):n})),c.runInContext=U,c}var e,t,n,r,F={function:!0,object:!0},o=F.object&&a&&!a.nodeType&&a,P=F[typeof window]&&window||this,i=o&&F.object&&s&&!s.nodeType&&"object"==typeof m&&m;!i||i.global!==i&&i.window!==i&&i.self!==i||(P=i),o?U(P,o):(e=P.JSON,t=P.JSON3,n=!1,r=U(P,P.JSON3={noConflict:function(){return n||(n=!0,P.JSON=e,P.JSON3=t,e=t=null),r}}),P.JSON={parse:r.parse,stringify:r.stringify})}).call(m)}),{DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",COOKIE_TEST:"amplitude_cookie_test",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id"}),b=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},w=function(e){for(var t="",n=0,r=0,o=0,i=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):191<r&&r<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),i=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return t},I={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}return I._encode(e)},_encode:function(e){var t,n,r,o,i,s,a,c="",u=0;for(e=b(e);u<e.length;)o=(t=e.charCodeAt(u++))>>2,i=(3&t)<<4|(n=e.charCodeAt(u++))>>4,s=(15&n)<<2|(r=e.charCodeAt(u++))>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),c=c+I._keyStr.charAt(o)+I._keyStr.charAt(i)+I._keyStr.charAt(s)+I._keyStr.charAt(a);return c},decode:function(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(e){}return I._decode(e)},_decode:function(e){var t,n,r,o,i,s,a="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=I._keyStr.indexOf(e.charAt(c++))<<2|(o=I._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(i=I._keyStr.indexOf(e.charAt(c++)))>>2,r=(3&i)<<6|(s=I._keyStr.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!==i&&(a+=String.fromCharCode(n)),64!==s&&(a+=String.fromCharCode(r));return w(a)}},E=e(function(e,n){n.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?function(){switch(t.protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}():t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},n.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},n.isRelative=function(e){return!n.isAbsolute(e)},n.isCrossDomain=function(e){e=n.parse(e);var t=n.parse(window.location.href);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol}}),S=1e3,C=6e4,O=36e5,N=24*O,A=e(function(e,c){function t(e){function r(){if(r.enabled){var o=r,e=+new Date,t=e-(a||e);o.diff=t,o.prev=a,o.curr=e,a=e;for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=c.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var n,r=c.formatters[t];return"function"==typeof r&&(n=i[s],e=r.call(o,n),i.splice(s,1),s--),e}),c.formatArgs.call(o,i),(r.log||c.log||console.log.bind(console)).apply(o,i)}}var a;return r.namespace=e,r.enabled=c.enabled(e),r.useColors=c.useColors(),r.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return c.colors[Math.abs(n)%c.colors.length]}(e),r.destroy=n,"function"==typeof c.init&&c.init(r),c.instances.push(r),r}function n(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}(c=e.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){c.save(e),c.names=[],c.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(r=0;r<c.instances.length;r++){var o=c.instances[r];o.enabled=c.enabled(o.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;for(var t=0,n=c.skips.length;t<n;t++)if(c.skips[t].test(e))return!1;for(t=0,n=c.names.length;t<n;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=r,c.instances=[],c.names=[],c.skips=[],c.formatters={}}),T=e(function(e,i){function t(){var e;try{e=i.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(i=e.exports=A).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t,n,r,o=this.useColors;e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+i.humanize(this.diff),o&&(t="color: "+this.color,e.splice(1,0,t,"color: inherit"),e[r=n=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t))},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=t,i.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(t())})("cookie"),x=e(function(e,s){function t(e){for(var t=s.cookie,n=s.levels(e),r=0;r<n.length;++r){var o=n[r],i={domain:"."+o};if(t("__tld__",1,i),t("__tld__"))return t("__tld__",null,i),o}return""}var i=E.parse;t.levels=function(e){var t=i(e).hostname.split("."),n=t[t.length-1],r=[];if(4===t.length&&n===parseInt(n,10))return r;if(t.length<=1)return r;for(var o=t.length-2;0<=o;--o)r.push(t.slice(o).join("."));return r},t.cookie=p,s=e.exports=t}),j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=Object.prototype.toString,R="WARN",U={DISABLE:0,ERROR:1,WARN:2,INFO:3},F={error:function(e){U.ERROR<=R&&P(e)},warn:function(e){U.WARN<=R&&P(e)},info:function(e){U.INFO<=R&&P(e)}},P=function(e){try{console.log("[Amplitude] "+e)}catch(e){}},D=["null","nan","undefined","function","arguments","regexp","element"],M=function e(t,n){var r=f(n);if(-1!==D.indexOf(r))F.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("error"===r)n=String(n),F.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var o=[],i=0;i<n.length;i++){var s=n[i],a=f(s);"array"!==a&&"object"!==a?o.push(e(t,s)):F.warn("WARNING: Cannot have "+a+" nested in an array property value, skipping")}n=o}else"object"===r&&(n=l(n));return n},q=F,V=function(e){return!e||0===e.length},L=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},B=function e(t){if("array"===f(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if("object"===f(t))for(var r in t)t.hasOwnProperty(r)&&(t[r]=e(t[r]));else t="string"===f(o=t)&&o.length>_.MAX_STRING_LENGTH?o.substring(0,_.MAX_STRING_LENGTH):o;var o;return t},G=function(e){var t=f(e);if("object"!==t)return F.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n,r,o,i={};for(var s in e){e.hasOwnProperty(s)&&("string"!==(r=f(n=s))&&(n=String(n),F.warn("WARNING: Non-string groupType, received type "+r+', coercing to string "'+n+'"')),null!==(o=function(e){var t=f(e);if("string"===t)return e;if("date"===t||"number"===t||"boolean"===t)return e=String(e),F.warn("WARNING: Non-string groupName, received type "+t+', coercing to string "'+e+'"'),e;if("array"===t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=f(o);"array"!==i&&"object"!==i?"string"===i?n.push(o):"date"!==i&&"number"!==i&&"boolean"!==i||(o=String(o),F.warn("WARNING: Non-string groupName, received type "+i+', coercing to string "'+o+'"'),n.push(o)):F.warn("WARNING: Skipping nested "+i+" in array groupName")}return n}F.warn("WARNING: Non-string groupName, received type "+t+". Please use strings or array of strings for groupName")}(e[s]))&&(i[n]=o))}return i},K=function(e,t,n){return f(e)===n||(F.error("Invalid "+t+" input type. Expected "+n+" but received "+f(e)),!1)},z=l,J={expirationDays:void 0,domain:void 0},$=function(e,t,n){var r,o=null!==t?n.expirationDays:-1;o&&((r=new Date).setTime(r.getTime()+24*o*60*60*1e3),o=r);var i=e+"="+t;o&&(i+="; expires="+o.toUTCString()),i+="; path=/",n.domain&&(i+="; domain="+n.domain),document.cookie=i},W={reset:function(){J={expirationDays:void 0,domain:void 0}},options:function(e){if(0===arguments.length)return J;e=e||{},J.expirationDays=e.expirationDays;var t=V(e.domain)?"."+x(window.location.href):e.domain,n=Math.random();J.domain=t,g("amplitude_test",n);var r=h("amplitude_test");r&&r===n||(t=null),v("amplitude_test"),J.domain=t},get:h,set:g,remove:v};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(e){}}())y=window.localStorage;else if(window.globalStorage)try{y=window.globalStorage[window.location.hostname]}catch(e){}else{var Y=document.createElement("div"),X="localStorage";Y.style.display="none",document.getElementsByTagName("head")[0].appendChild(Y),Y.addBehavior&&(Y.addBehavior("#default#userdata"),y={length:0,setItem:function(e,t){Y.load(X),Y.getAttribute(e)||this.length++,Y.setAttribute(e,t),Y.save(X)},getItem:function(e){return Y.load(X),Y.getAttribute(e)},removeItem:function(e){Y.load(X),Y.getAttribute(e)&&this.length--,Y.removeAttribute(e),Y.save(X)},clear:function(){Y.load(X);for(var e,t=0;e=Y.XMLDocument.documentElement.attributes[t++];)Y.removeAttribute(e.name);Y.save(X),this.length=0},key:function(e){return Y.load(X),Y.XMLDocument.documentElement.attributes[e]}},Y.load(X),y.length=Y.XMLDocument.documentElement.attributes.length)}function H(){this.storage=null}var Q=y=y||{length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}};H.prototype._cookiesEnabled=function(){var e,t=String(new Date);try{return W.set(_.COOKIE_TEST,t),e=W.get(_.COOKIE_TEST)===t,W.remove(_.COOKIE_TEST),e}catch(e){}return!1},H.prototype.getStorage=function(){return null!==this.storage||(this._cookiesEnabled()?this.storage=W:this.storage={_options:{expirationDays:void 0,domain:void 0},reset:function(){this._options={expirationDays:void 0,domain:void 0}},options:function(e){return 0===arguments.length||(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window.location.hostname),this._options},get:function(e){try{return JSON.parse(Q.getItem("amp_cookiestore_"+e))}catch(e){}return null},set:function(e,t){try{return Q.setItem("amp_cookiestore_"+e,JSON.stringify(t)),!0}catch(e){}return!1},remove:function(e){try{Q.removeItem("amp_cookiestore_"+e)}catch(e){return!1}}}),this.storage};function Z(){this.userPropertiesOperations={},this.properties=[]}Z.prototype.add=function(e,t){return"number"===f(t)||"string"===f(t)?this._addOperation("$add",e,t):q.error("Unsupported type for value: "+f(t)+", expecting number or string"),this},Z.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},Z.prototype.clearAll=function(){return 0<Object.keys(this.userPropertiesOperations).length?this.userPropertiesOperations.hasOwnProperty("$clearAll")||q.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"):this.userPropertiesOperations.$clearAll="-",this},Z.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},Z.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},Z.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},Z.prototype.unset=function(e){return this._addOperation("$unset",e,"-"),this},Z.prototype._addOperation=function(e,t,n){this.userPropertiesOperations.hasOwnProperty("$clearAll")?q.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(this.userPropertiesOperations.hasOwnProperty(e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):q.error('User property "'+t+'" already used in this identify, skipping operation '+e)};function ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":xe&&xe in Object(e)?function(e){var t=Oe.call(e,Ae),n=e[Ae];try{var r=!(e[Ae]=void 0)}catch(e){}var o=Ne.call(e);return r&&(t?e[Ae]=n:delete e[Ae]),o}(e):(t=e,Te.call(t));var t}function te(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ne(e){if(te(e)){var t=ee(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}}function re(e){return!(!te(e)||ke&&ke in e)&&(ne(e)?qe:Ue).test(function(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function oe(e,t,n){"__proto__"==t&&Ve?Ve(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ie(e,t){return e===t||e!=e&&t!=t}function se(e,t,n){var r=e[t];Le.call(e,t)&&ie(r,n)&&(void 0!==n||t in e)||oe(e,t,n)}function ae(e){return e}function ce(e,t){return ze((i=e,a=ae,s=Be(void 0===(s=t)?i.length-1:s,0),function(){for(var e=arguments,t=-1,n=Be(e.length-s,0),r=Array(n);++t<n;)r[t]=e[s+t];t=-1;for(var o=Array(s+1);++t<s;)o[t]=e[t];return o[s]=a(r),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(i,this,o)}),e+"");var i,s,a}function ue(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}function pe(e){return null!=e&&ue(e.length)&&!ne(e)}function le(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Je.test(e))&&-1<e&&e%1==0&&e<t}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$e)}function fe(e){return null!=e&&"object"==typeof e}function he(e){return fe(e)&&"[object Arguments]"==ee(e)}function ge(){return!1}var ve,ye,me,_e,be=e(function(e){function l(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,o,i){return l((s=l(l(t,e),l(r,i)))<<o|s>>>32-o,n);var s}function d(e,t,n,r,o,i,s){return a(t&n|~t&r,e,t,o,i,s)}function f(e,t,n,r,o,i,s){return a(t&r|n&~r,e,t,o,i,s)}function h(e,t,n,r,o,i,s){return a(t^n^r,e,t,o,i,s)}function g(e,t,n,r,o,i,s){return a(n^(t|~r),e,t,o,i,s)}function c(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,r,o,i,s=1732584193,a=-271733879,c=-1732584194,u=271733878,p=0;p<e.length;p+=16)a=g(a=g(a=g(a=g(a=h(a=h(a=h(a=h(a=f(a=f(a=f(a=f(a=d(a=d(a=d(a=d(r=a,c=d(o=c,u=d(i=u,s=d(n=s,a,c,u,e[p],7,-680876936),a,c,e[p+1],12,-389564586),s,a,e[p+2],17,606105819),u,s,e[p+3],22,-1044525330),c=d(c,u=d(u,s=d(s,a,c,u,e[p+4],7,-176418897),a,c,e[p+5],12,1200080426),s,a,e[p+6],17,-1473231341),u,s,e[p+7],22,-45705983),c=d(c,u=d(u,s=d(s,a,c,u,e[p+8],7,1770035416),a,c,e[p+9],12,-1958414417),s,a,e[p+10],17,-42063),u,s,e[p+11],22,-1990404162),c=d(c,u=d(u,s=d(s,a,c,u,e[p+12],7,1804603682),a,c,e[p+13],12,-40341101),s,a,e[p+14],17,-1502002290),u,s,e[p+15],22,1236535329),c=f(c,u=f(u,s=f(s,a,c,u,e[p+1],5,-165796510),a,c,e[p+6],9,-1069501632),s,a,e[p+11],14,643717713),u,s,e[p],20,-373897302),c=f(c,u=f(u,s=f(s,a,c,u,e[p+5],5,-701558691),a,c,e[p+10],9,38016083),s,a,e[p+15],14,-660478335),u,s,e[p+4],20,-405537848),c=f(c,u=f(u,s=f(s,a,c,u,e[p+9],5,568446438),a,c,e[p+14],9,-1019803690),s,a,e[p+3],14,-187363961),u,s,e[p+8],20,1163531501),c=f(c,u=f(u,s=f(s,a,c,u,e[p+13],5,-1444681467),a,c,e[p+2],9,-51403784),s,a,e[p+7],14,1735328473),u,s,e[p+12],20,-1926607734),c=h(c,u=h(u,s=h(s,a,c,u,e[p+5],4,-378558),a,c,e[p+8],11,-2022574463),s,a,e[p+11],16,1839030562),u,s,e[p+14],23,-35309556),c=h(c,u=h(u,s=h(s,a,c,u,e[p+1],4,-1530992060),a,c,e[p+4],11,1272893353),s,a,e[p+7],16,-155497632),u,s,e[p+10],23,-1094730640),c=h(c,u=h(u,s=h(s,a,c,u,e[p+13],4,681279174),a,c,e[p],11,-358537222),s,a,e[p+3],16,-722521979),u,s,e[p+6],23,76029189),c=h(c,u=h(u,s=h(s,a,c,u,e[p+9],4,-640364487),a,c,e[p+12],11,-421815835),s,a,e[p+15],16,530742520),u,s,e[p+2],23,-995338651),c=g(c,u=g(u,s=g(s,a,c,u,e[p],6,-198630844),a,c,e[p+7],10,1126891415),s,a,e[p+14],15,-1416354905),u,s,e[p+5],21,-57434055),c=g(c,u=g(u,s=g(s,a,c,u,e[p+12],6,1700485571),a,c,e[p+3],10,-1894986606),s,a,e[p+10],15,-1051523),u,s,e[p+1],21,-2054922799),c=g(c,u=g(u,s=g(s,a,c,u,e[p+8],6,1873313359),a,c,e[p+15],10,-30611744),s,a,e[p+6],15,-1560198380),u,s,e[p+13],21,1309151649),c=g(c,u=g(u,s=g(s,a,c,u,e[p+4],6,-145523070),a,c,e[p+11],10,-1120210379),s,a,e[p+2],15,718787259),u,s,e[p+9],21,-343485551),s=l(s,n),a=l(a,r),c=l(c,o),u=l(u,i);return[s,a,c,u]}function u(e){for(var t="",n=32*e.length,r=0;r<n;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function p(e){var t=[];for(t[(e.length>>2)-1]=void 0,r=0;r<t.length;r+=1)t[r]=0;for(var n=8*e.length,r=0;r<n;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function r(e){for(var t,n="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function n(e){return unescape(encodeURIComponent(e))}function o(e){return u(c(p(t=n(e)),8*t.length));var t}function i(e,t){return function(e,t){var n,r,o=p(e),i=[],s=[];for(i[15]=s[15]=void 0,16<o.length&&(o=c(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],s[n]=1549556828^o[n];return r=c(i.concat(p(t)),512+8*t.length),u(c(s.concat(r),640))}(n(e),n(t))}function t(e,t,n){return t?n?i(t,e):r(i(t,e)):n?o(e):r(o(e))}var s;s=m,e.exports?e.exports=t:s.md5=t}),we="object"==typeof m&&m&&m.Object===Object&&m,Ie="object"==typeof self&&self&&self.Object===Object&&self,Ee=we||Ie||Function("return this")(),Se=Ee.Symbol,Ce=Object.prototype,Oe=Ce.hasOwnProperty,Ne=Ce.toString,Ae=Se?Se.toStringTag:void 0,Te=Object.prototype.toString,xe=Se?Se.toStringTag:void 0,je=Ee["__core-js_shared__"],ke=(_e=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+_e:"",Re=Function.prototype.toString,Ue=/^\[object .+?Constructor\]$/,Fe=Function.prototype,Pe=Object.prototype,De=Fe.toString,Me=Pe.hasOwnProperty,qe=RegExp("^"+De.call(Me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=function(){try{var e=(t=Object,r="defineProperty",o=null==(n=t)?void 0:n[r],re(o)?o:void 0);return e({},"",{}),e}catch(e){}var t,n,r,o}(),Le=Object.prototype.hasOwnProperty,Be=Math.max,Ge=Ve?function(e,t){return Ve(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:ae,Ke=Date.now,ze=(ve=Ge,me=ye=0,function(){var e=Ke(),t=16-(e-me);if(me=e,0<t){if(800<=++ye)return arguments[0]}else ye=0;return ve.apply(void 0,arguments)}),Je=/^(?:0|[1-9]\d*)$/,$e=Object.prototype,We=Object.prototype,Ye=We.hasOwnProperty,Xe=We.propertyIsEnumerable,He=he(function(){return arguments}())?he:function(e){return fe(e)&&Ye.call(e,"callee")&&!Xe.call(e,"callee")},Qe=Array.isArray,Ze=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?Ee.Buffer:void 0,i=(o?o.isBuffer:void 0)||ge;e.exports=i}),et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et["[object Arguments]"]=et["[object Array]"]=et["[object ArrayBuffer]"]=et["[object Boolean]"]=et["[object DataView]"]=et["[object Date]"]=et["[object Error]"]=et["[object Function]"]=et["[object Map]"]=et["[object Number]"]=et["[object Object]"]=et["[object RegExp]"]=et["[object Set]"]=et["[object String]"]=et["[object WeakMap]"]=!1;function tt(e,t){var n=Qe(e),r=!n&&He(e),o=!n&&!r&&Ze(e),i=!n&&!r&&!o&&pt(e),s=n||r||o||i,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)!t&&!lt.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||le(u,c))||a.push(u);return a}function nt(e){return(pe(e)?tt:function(e){if(!de(e))return dt(e);var t=[];for(var n in Object(e))ft.call(e,n)&&"constructor"!=n&&t.push(n);return t})(e)}function rt(e,t){this.url=e,this.data=t||{}}var ot,it,st,at,ct=e(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&we.process,i=function(){try{return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),ut=ct&&ct.isTypedArray,pt=ut?(at=ut,function(e){return at(e)}):function(e){return fe(e)&&ue(e.length)&&!!et[ee(e)]},lt=Object.prototype.hasOwnProperty,dt=(it=Object.keys,st=Object,function(e){return it(st(e))}),ft=Object.prototype.hasOwnProperty,ht=Object.prototype.hasOwnProperty,gt=(ot=function(e,t){if(de(t)||pe(t))!function(e,t,n,r){var o=!n;n=n||{};for(var i=-1,s=t.length;++i<s;){var a=t[i],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),(o?oe:se)(n,a,c)}}(t,nt(t),e);else for(var n in t)ht.call(t,n)&&se(e,n,t[n])},ce(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0,o=3<ot.length&&"function"==typeof o?(r--,o):void 0;for(i&&function(e,t,n){if(te(n)){var r=typeof t;return("number"==r?pe(n)&&le(t,n.length):"string"==r&&t in n)&&ie(n[t],e)}}(t[0],t[1],i)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var s=t[n];s&&ot(e,s,n,o)}return e})),vt=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},yt=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},mt={encode:t,stringify:t,decode:n,parse:n};rt.prototype.send=function(e){var t,n;window.XDomainRequest?((t=new window.XDomainRequest).open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(mt.stringify(this.data))):((n=new XMLHttpRequest).open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(mt.stringify(this.data)))};function _t(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null}_t.prototype.setProductId=function(e){return"string"!==f(e)?q.error("Unsupported type for productId: "+f(e)+", expecting string"):V(e)?q.error("Invalid empty productId"):this._productId=e,this},_t.prototype.setQuantity=function(e){return"number"!==f(e)?q.error("Unsupported type for quantity: "+f(e)+", expecting number"):this._quantity=parseInt(e),this},_t.prototype.setPrice=function(e){return"number"!==f(e)?q.error("Unsupported type for price: "+f(e)+", expecting number"):this._price=e,this},_t.prototype.setRevenueType=function(e){return"string"!==f(e)?q.error("Unsupported type for revenueType: "+f(e)+", expecting string"):this._revenueType=e,this},_t.prototype.setEventProperties=function(e){return"object"!==f(e)?q.error("Unsupported type for eventProperties: "+f(e)+", expecting object"):this._properties=z(e),this},_t.prototype._isValidRevenue=function(){return"number"===f(this._price)||(q.error("Invalid revenue, need to set price field"),!1)},_t.prototype._toJSONObject=function(){var e="object"===f(this._properties)?this._properties:{};return null!==this._productId&&(e[_.REVENUE_PRODUCT_ID]=this._productId),null!==this._quantity&&(e[_.REVENUE_QUANTITY]=this._quantity),null!==this._price&&(e[_.REVENUE_PRICE]=this._price),null!==this._revenueType&&(e[_.REVENUE_REVENUE_TYPE]=this._revenueType),e};function bt(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,bt)}function wt(e){this._instanceName=V(e)?_.DEFAULT_INSTANCE:e.toLowerCase(),this._legacyStorageSuffix=this._instanceName===_.DEFAULT_INSTANCE?"":"_"+this._instanceName,this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new It(navigator.userAgent).getResult(),this.options=gt({},Et),this.cookieStorage=(new H).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._userAgent=navigator&&navigator.userAgent||null}var It=e(function(g,v){!function(o){var e="model",t="name",n="type",r="vendor",i="version",s="mobile",a="tablet",c={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.split(".")[0]:void 0}},u={rgx:function(){for(var e,t,n,r,o,i,s,a=0,c=arguments;a<c.length&&!i;){var u=c[a],p=c[a+1];if(void 0===e)for(r in e={},p)p.hasOwnProperty(r)&&("object"==typeof(o=p[r])?e[o[0]]=void 0:e[o]=void 0);for(t=n=0;t<u.length&&!i;)if(i=u[t++].exec(this.getUA()))for(r=0;r<p.length;r++)s=i[++n],"object"==typeof(o=p[r])&&0<o.length?2==o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,s):e[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=s?s.replace(o[1],o[2]):void 0:e[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(e[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):e[o]=s||void 0;a+=2}return e},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var r=0;r<t[n].length;r++)if(c.has(t[n][r],e))return"?"===n?void 0:n}else if(c.has(t[n],e))return"?"===n?void 0:n;return e}},p={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},name:{"Opera Mobile":"Opera Mobi","IE Mobile":"IEMobile"}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},name:{"Windows Phone":"Windows Phone OS"}}}},l={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,i],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],i],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],i],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[t,i],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],i],[/(edge)\/((\d+)?[\w\.]+)/i],[t,i],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],i],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],i],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[t,"Chrome Mobile"],i],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[t,i],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],i],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],i],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[i,[t,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[i,[t,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[i,[t,"Facebook"]],[/fxios\/([\w\.-]+)/i],[i,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[i,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[i,t],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[i,u.str,p.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[t,i],[/(blackberry)\\s?\/([\w\.]+)/i],[[t,"BlackBerry"],i],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],i],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,i]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",c.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",c.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",c.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[e,r,[n,a]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[r,"Apple"],[n,a]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[r,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[r,e,[n,a]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[e,[r,"Amazon"],[n,a]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[e,u.str,p.device.amazon.model],[r,"Amazon"],[n,s]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,r,[n,s]],[/\((ip[honed|\s\w*]+);/i],[e,[r,"Apple"],[n,s]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[r,e,[n,s]],[/\(bb10;\s(\w+)/i],[e,[r,"BlackBerry"],[n,s]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[e,[r,"Asus"],[n,a]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[r,"Sony"],[e,"Xperia Tablet"],[n,a]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[r,"Sony"],[e,"Xperia Phone"],[n,s]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[r,e,[n,"console"]],[/android.+;\s(shield)\sbuild/i],[e,[r,"Nvidia"],[n,"console"]],[/(playstation\s[34portablevi]+)/i],[e,[r,"Sony"],[n,"console"]],[/(sprint\s(\w+))/i],[[r,u.str,p.device.sprint.vendor],[e,u.str,p.device.sprint.model],[n,s]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[r,e,[n,a]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[r,[e,/_/g," "],[n,s]],[/(nexus\s9)/i],[e,[r,"HTC"],[n,a]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[r,"Microsoft"],[n,"console"]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[r,"Microsoft"],[n,s]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[e,[r,"Motorola"],[n,s]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[r,"Motorola"],[n,a]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[r,"Samsung"],e,[n,a]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[r,"Samsung"],e,[n,s]],[/(samsung);smarttv/i],[r,e,[n,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[e,[r,"Sharp"],[n,"smarttv"]],[/sie-(\w+)*/i],[e,[r,"Siemens"],[n,s]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[r,"Nokia"],e,[n,s]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[e,[r,"Acer"],[n,a]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[r,"LG"],e,[n,a]],[/(lg) netcast\.tv/i],[r,e,[n,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[e,[r,"LG"],[n,s]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[r,"Lenovo"],[n,a]],[/linux;.+((jolla));/i],[r,e,[n,s]],[/((pebble))app\/[\d\.]+\s/i],[r,e,[n,"wearable"]],[/android.+;\s(glass)\s\d/i],[e,[r,"Google"],[n,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[e,/_/g," "],[r,"Xiaomi"],[n,s]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[n,c.lowerize],r,e]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[i,[t,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,i],[/rv\:([\w\.]+).*(gecko)/i],[i,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,i],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[t,u.str,p.os.windows.name],[i,u.str,p.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[i,u.str,p.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],i],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[t,i],[/(symbian\s?o?s?|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[t,"Symbian"],i],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],i],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[t,"Linux"],i],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],i],[/(sunos)\s?([\w\.]+\d)*/i],[[t,"Solaris"],i],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[[t,"Linux"],i],[/(iphone)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[t,"iPhone"],[i,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[t,"iPad"],[i,/_/g,"."]],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[t,"iOS"],[i,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac"],[i,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[t,i]]},d=function(e,t){if(!(this instanceof d))return new d(e,t).getResult();var n=e||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),r=t?c.extend(l,t):l;return this.getBrowser=function(){var e=u.rgx.apply(this,r.browser);return e.major=c.major(e.version),e},this.getCPU=function(){return u.rgx.apply(this,r.cpu)},this.getDevice=function(){return u.rgx.apply(this,r.device)},this.getEngine=function(){return u.rgx.apply(this,r.engine)},this.getOS=function(){return u.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};d.VERSION="0.7.10",d.BROWSER={NAME:t,MAJOR:"major",VERSION:i},d.CPU={ARCHITECTURE:"architecture"},d.DEVICE={MODEL:e,VENDOR:r,TYPE:n,CONSOLE:"console",MOBILE:s,SMARTTV:"smarttv",TABLET:a,WEARABLE:"wearable",EMBEDDED:"embedded"},d.ENGINE={NAME:t,VERSION:i},d.OS={NAME:t,VERSION:i},g.exports&&(v=g.exports=d),v.UAParser=d;var f,h=o.jQuery||o.Zepto;void 0!==h&&(f=new d,h.ua=f.getResult(),h.ua.get=function(){return f.getUA()},h.ua.set=function(e){f.setUA(e);var t=f.getResult();for(var n in t)h.ua[n]=t[n]})}("object"==typeof window?window:m)}),Et={apiEndpoint:"api.amplitude.com",cookieExpiration:3650,cookieName:"amplitude_id",domain:"",includeReferrer:!1,includeUtm:!1,language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0,logLevel:"WARN",optOut:!1,platform:"Android",savedMaxCount:1e3,saveEvents:!0,sessionTimeout:18e5,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,batchEvents:!1,eventUploadThreshold:30,eventUploadPeriodMillis:3e4,forceHttps:!0,includeGclid:!1,saveParamsReferrerOncePerSession:!0,deviceIdFromUrlParam:!1};wt.prototype.Identify=Z,wt.prototype.Revenue=_t,wt.prototype.init=function(e,t,n,r){if("string"!==f(e)||V(e))q.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{if(this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix,St(this.options,n),this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===_.DEFAULT_INSTANCE&&Ct(this),Ot(this),this.options.deviceId="object"===f(n)&&"string"===f(n.deviceId)&&!V(n.deviceId)&&n.deviceId||this.options.deviceIdFromUrlParam&&this._getDeviceIdFromUrlParam(this._getUrlParams())||this.options.deviceId||bt()+"R",this.options.userId="string"===f(t)&&!V(t)&&t||"number"===f(t)&&t.toString()||this.options.userId||null,this.options.saveEvents){this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey);for(var o=0;o<this._unsentEvents.length;o++){var i=this._unsentEvents[o].event_properties,s=this._unsentEvents[o].groups;this._unsentEvents[o].event_properties=z(i),this._unsentEvents[o].groups=G(s)}for(var a=0;a<this._unsentIdentifys.length;a++){var c=this._unsentIdentifys[a].user_properties,u=this._unsentIdentifys[a].groups;this._unsentIdentifys[a].user_properties=z(c),this._unsentIdentifys[a].groups=G(u)}}var p=(new Date).getTime();this._sessionId&&this._lastEventTime&&!(p-this._lastEventTime>this.options.sessionTimeout)||(this._newSession=!0,this._sessionId=p,this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),this.options.saveParamsReferrerOncePerSession||this._trackParamsAndReferrer(),this._lastEventTime=p,At(this),this._sendEventsIfReady()}catch(e){q.error(e)}finally{"function"===f(r)&&r(this)}},wt.prototype._trackParamsAndReferrer=function(){this.options.includeUtm&&this._initUtmData(),this.options.includeReferrer&&this._saveReferrer(this._getReferrer()),this.options.includeGclid&&this._saveGclid(this._getUrlParams())};var St=function(e,t){if("object"===f(t)){for(var n in t)t.hasOwnProperty(n)&&(r=n,o=void 0,Et.hasOwnProperty(r)&&(o=t[r],i=f(Et[r]),K(o,r+" option",i)&&("boolean"===i?e[r]=!!o:("string"===i&&!V(o)||"number"===i&&0<o)&&(e[r]=o))))}var r,o,i};wt.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===f(t)&&t.apply(this,this._q[e].slice(1))}this._q=[]},wt.prototype._apiKeySet=function(e){return!V(this.options.apiKey)||(q.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},wt.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(Q,e),n=this._parseSavedUnsentEventsString(t,e),r=this._getFromStorageLegacy(Q,e),o=this._parseSavedUnsentEventsString(r,e).concat(n);return this._removeFromLegacyStorage(Q,e),this._setInStorage(Q,e,JSON.stringify(o)),o},wt.prototype._removeFromLegacyStorage=function(e,t){e.removeItem(t+this._legacyStorageSuffix)},wt.prototype._parseSavedUnsentEventsString=function(e,t){if(V(e))return[];if("string"===f(e))try{var n=JSON.parse(e);if("array"===f(n))return n}catch(e){}return q.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},wt.prototype.isNewSession=function(){return this._newSession},wt.prototype.getSessionId=function(){return this._sessionId},wt.prototype.nextEventId=function(){return this._eventId++,this._eventId},wt.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},wt.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},wt.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},wt.prototype._sendEventsIfReady=function(e){return 0!==this._unsentCount()&&(!this.options.batchEvents||this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(e),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1))},wt.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},wt.prototype._getFromStorageLegacy=function(e,t){return e.getItem(t+this._legacyStorageSuffix)},wt.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var Ct=function(e){var t,n,r,o,i,s,a,c,u,p,l,d=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);"object"===f(d)||(d=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix),"object"===f(d)&&d.deviceId&&d.sessionId&&d.lastEventTime)||(t=function(e){var t=Q.getItem(e);return Q.removeItem(e),t},n="string"===f(e.options.apiKey)&&"_"+e.options.apiKey.slice(0,6)||"",r=t(_.DEVICE_ID+n),o=t(_.USER_ID+n),null!=(i=t(_.OPT_OUT+n))&&(i="true"===String(i)),s=parseInt(t(_.SESSION_ID)),a=parseInt(t(_.LAST_EVENT_TIME)),c=parseInt(t(_.LAST_EVENT_ID)),u=parseInt(t(_.LAST_IDENTIFY_ID)),p=parseInt(t(_.LAST_SEQUENCE_NUMBER)),l=function(e){return"object"===f(d)&&d[e]},e.options.deviceId=l("deviceId")||r,e.options.userId=l("userId")||o,e._sessionId=l("sessionId")||s||e._sessionId,e._lastEventTime=l("lastEventTime")||a||e._lastEventTime,e._eventId=l("eventId")||c||e._eventId,e._identifyId=l("identifyId")||u||e._identifyId,e._sequenceNumber=l("sequenceNumber")||p||e._sequenceNumber,e.options.optOut=i||!1,d&&void 0!==d.optOut&&null!==d.optOut&&(e.options.optOut="true"===String(d.optOut)),At(e))},Ot=function(e){var t,n=e.cookieStorage.get(e.options.cookieName+e._storageSuffix);"object"===f(n)?Nt(e,n):(t=e.cookieStorage.get(e.options.cookieName+e._legacyStorageSuffix),"object"===f(t)&&(e.cookieStorage.remove(e.options.cookieName+e._legacyStorageSuffix),Nt(e,t)))},Nt=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime)),t.eventId&&(e._eventId=parseInt(t.eventId)),t.identifyId&&(e._identifyId=parseInt(t.identifyId)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber))},At=function(e){e.cookieStorage.set(e.options.cookieName+e._storageSuffix,{deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber})};wt.prototype._initUtmData=function(e,t){e=e||this._getUrlParams();var n,r,o,i,s,a,c,u,p,l=(n=t=t||this.cookieStorage.get("__utmz"),r=e,o=n?"?"+n.split(".").slice(-1)[0].replace(/\|/g,"&"):"",i=d("utm_source",r,"utmcsr",o),s=d("utm_medium",r,"utmcmd",o),a=d("utm_campaign",r,"utmccn",o),c=d("utm_term",r,"utmctr",o),u=d("utm_content",r,"utmcct",o),p={},f("utm_source",i),f("utm_medium",s),f("utm_campaign",a),f("utm_term",c),f("utm_content",u),p);function d(e,t,n,r){return L(e,t)||L(n,r)}function f(e,t){V(t)||(p[e]=t)}Tt(this,l)};var Tt=function(e,t){if("object"===f(t)&&0!==Object.keys(t).length){var n=new Z;for(var r in t)t.hasOwnProperty(r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};wt.prototype._getReferrer=function(){return document.referrer},wt.prototype._getUrlParams=function(){return location.search},wt.prototype._saveGclid=function(e){var t=L("gclid",e);V(t)||Tt(this,{gclid:t})},wt.prototype._getDeviceIdFromUrlParam=function(e){return L(_.AMP_DEVICE_ID_PARAM,e)},wt.prototype._getReferringDomain=function(e){if(V(e))return null;var t=e.split("/");return 3<=t.length?t[2]:null},wt.prototype._saveReferrer=function(e){var t;V(e)||(t={referrer:e,referring_domain:this._getReferringDomain(e)},Tt(this,t))},wt.prototype.saveEvents=function(){try{this._setInStorage(Q,this.options.unsentKey,JSON.stringify(this._unsentEvents))}catch(e){}try{this._setInStorage(Q,this.options.unsentIdentifyKey,JSON.stringify(this._unsentIdentifys))}catch(e){}},wt.prototype.setDomain=function(e){if(K(e,"domain","string"))try{this.cookieStorage.options({domain:e}),this.options.domain=this.cookieStorage.options().domain,Ot(this),At(this)}catch(e){q.error(e)}},wt.prototype.setUserId=function(e){try{this.options.userId=null!=e&&""+e||null,At(this)}catch(e){q.error(e)}},wt.prototype.setGroup=function(e,t){var n,r;this._apiKeySet("setGroup()")&&K(e,"groupType","string")&&!V(e)&&((n={})[e]=t,r=(new Z).set(e,t),this._logEvent(_.IDENTIFY_EVENT,null,null,r.userPropertiesOperations,n,null,null))},wt.prototype.setOptOut=function(e){if(K(e,"enable","boolean"))try{this.options.optOut=e,At(this)}catch(e){q.error(e)}},wt.prototype.setSessionId=function(e){if(K(e,"sessionId","number"))try{this._sessionId=e,At(this)}catch(e){q.error(e)}},wt.prototype.regenerateDeviceId=function(){this.setDeviceId(bt()+"R")},wt.prototype.setDeviceId=function(e){if(K(e,"deviceId","string"))try{V(e)||(this.options.deviceId=""+e,At(this))}catch(e){q.error(e)}},wt.prototype.setUserProperties=function(e){if(this._apiKeySet("setUserProperties()")&&K(e,"userProperties","object")){var t=B(z(e));if(0!==Object.keys(t).length){var n=new Z;for(var r in t)t.hasOwnProperty(r)&&n.set(r,t[r]);this.identify(n)}}},wt.prototype.clearUserProperties=function(){var e;this._apiKeySet("clearUserProperties()")&&((e=new Z).clearAll(),this.identify(e))};function xt(e,t){for(var n=0;n<t._q.length;n++){var r=e[t._q[n][0]];"function"===f(r)&&r.apply(e,t._q[n].slice(1))}return e}wt.prototype.identify=function(e,t){if(this._apiKeySet("identify()")){if("object"===f(e)&&e.hasOwnProperty("_q")&&(e=xt(new Z,e)),e instanceof Z){if(0<Object.keys(e.userPropertiesOperations).length)return this._logEvent(_.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,t)}else q.error("Invalid identify input type. Expected Identify object but saw "+f(e));"function"===f(t)&&t(0,"No request sent")}else"function"===f(t)&&t(0,"No request sent")},wt.prototype.setVersionName=function(e){K(e,"versionName","string")&&(this.options.versionName=e)},wt.prototype._logEvent=function(e,t,n,r,o,i,s){if(Ot(this),e&&!this.options.optOut)try{var a=e===_.IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId(),c=this.nextSequenceNumber(),u="number"===f(i)?i:(new Date).getTime();this._sessionId&&this._lastEventTime&&!(u-this._lastEventTime>this.options.sessionTimeout)||(this._sessionId=u),this._lastEventTime=u,At(this),r=r||{},n=n||{},t=t||{},o=o||{};var p={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:u,event_id:a,session_id:this._sessionId||-1,event_type:e,version_name:"7.1.2.940",platform:"Android",os_name:"android",os_version:"10",device_model:"RMX1851",device_brand:"Realme",device_manufacturer:"Realme",carrier:"T-Mobile US",country:"US",api_level:29,language:this.options.language,api_properties:n,event_properties:B(z(t)),user_properties:B(z(r)),uuid:bt(),library:{name:"amplitude-android",version:"2.25.1"},sequence_number:c,groups:B(G(o)),user_agent:this._userAgent};return e===_.IDENTIFY_EVENT?(this._unsentIdentifys.push(p),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(p),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(s)||"function"!==f(s)||s(0,"No request sent"),a}catch(e){q.error(e)}else"function"===f(s)&&s(0,"No request sent")},wt.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount)},wt.prototype.logEvent=function(e,t,n){return this.logEventWithTimestamp(e,t,null,n)},wt.prototype.logEventWithTimestamp=function(e,t,n,r){return this._apiKeySet("logEvent()")&&K(e,"eventType","string")&&!V(e)?this._logEvent(e,t,null,null,null,n,r):("function"===f(r)&&r(0,"No request sent"),-1)},wt.prototype.logEventWithGroups=function(e,t,n,r){return this._apiKeySet("logEventWithGroup()")&&K(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,r):("function"===f(r)&&r(0,"No request sent"),-1)};function jt(e){return!isNaN(parseFloat(e))&&isFinite(e)}wt.prototype.logRevenueV2=function(e){if(this._apiKeySet("logRevenueV2()"))if("object"===f(e)&&e.hasOwnProperty("_q")&&(e=xt(new _t,e)),e instanceof _t){if(e&&e._isValidRevenue())return this.logEvent(_.REVENUE_EVENT,e._toJSONObject())}else q.error("Invalid revenue input type. Expected Revenue object but saw "+f(e))},wt.prototype.logRevenue=function(e,t,n){return this._apiKeySet("logRevenue()")&&jt(e)&&(void 0===t||jt(t))?this._logEvent(_.REVENUE_EVENT,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null):-1},wt.prototype.removeEvents=function(e,t){kt(this,"_unsentEvents",e),kt(this,"_unsentIdentifys",t)};var kt=function(e,t,n){if(!(n<0)){for(var r=[],o=0;o<e[t].length;o++)e[t][o].event_id>n&&r.push(e[t][o]);e[t]=r}};wt.prototype.sendEvents=function(n){var e,r,t,o,i,s,a,c,u;!this._apiKeySet("sendEvents()")||this._sending||this.options.optOut||0===this._unsentCount()?"function"===f(n)&&n(0,"No request sent"):(this._sending=!0,e=(this.options.forceHttps||"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint+"/",r=Math.min(this._unsentCount(),this.options.uploadBatchSize),t=this._mergeEventsAndIdentifys(r),o=t.maxEventId,i=t.maxIdentifyId,s=JSON.stringify(t.eventsToSend),a=(new Date).getTime(),c={client:this.options.apiKey,e:s,v:_.API_VERSION,upload_time:a,checksum:be(_.API_VERSION+this.options.apiKey+s+a)},u=this,new rt(e,c).send(function(e,t){u._sending=!1;try{200===e&&"success"===t?(u.removeEvents(o,i),u.options.saveEvents&&u.saveEvents(),u._sendEventsIfReady(n)||"function"!==f(n)||n(e,t)):413===e?(1===u.options.uploadBatchSize&&u.removeEvents(o,i),u.options.uploadBatchSize=Math.ceil(r/2),u.sendEvents(n)):"function"===f(n)&&n(e,t)}catch(e){}}))},wt.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,o=0,i=-1;t.length<e;){var s,a=o>=this._unsentIdentifys.length,c=n>=this._unsentEvents.length;if(c&&a){q.error("Merging Events and Identifys, less events and identifys than expected");break}a||!c&&(!("sequence_number"in this._unsentEvents[n])||this._unsentEvents[n].sequence_number<this._unsentIdentifys[o].sequence_number)?r=(s=this._unsentEvents[n++]).event_id:i=(s=this._unsentIdentifys[o++]).event_id,t.push(s)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:i}},wt.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},wt.prototype.__VERSION__="4.1.1";function Rt(){this.options=gt({},Et),this._q=[],this._instances={}}Rt.prototype.Identify=Z,Rt.prototype.Revenue=_t,Rt.prototype.getInstance=function(e){e=V(e)?_.DEFAULT_INSTANCE:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new wt(e),this._instances[e]=t),t},Rt.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===f(r)&&r(e)}.bind(this))},Rt.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===f(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)this._instances.hasOwnProperty(n)&&this._instances[n].runQueuedFunctions()},Rt.prototype.isNewSession=function(){return this.getInstance().isNewSession()},Rt.prototype.getSessionId=function(){return this.getInstance().getSessionId()},Rt.prototype.nextEventId=function(){return this.getInstance().nextEventId()},Rt.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},Rt.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},Rt.prototype.saveEvents=function(){this.getInstance().saveEvents()},Rt.prototype.setDomain=function(e){this.getInstance().setDomain(e)},Rt.prototype.setUserId=function(e){this.getInstance().setUserId(e)},Rt.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},Rt.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},Rt.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},Rt.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},Rt.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},Rt.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},Rt.prototype.identify=function(e,t){this.getInstance().identify(e,t)},Rt.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},Rt.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},Rt.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},Rt.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},Rt.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},Rt.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},Rt.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},Rt.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},Rt.prototype.__VERSION__="4.1.1";var Ut=window.amplitude||{},Ft=new Rt;for(var Pt in Ft._q=Ut._q||[],Ut._iq)Ut._iq.hasOwnProperty(Pt)&&(Ft.getInstance(Pt)._q=Ut._iq[Pt]._q||[]);return Ft});
